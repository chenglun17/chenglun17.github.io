<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Canvas | chenglun17 blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/images/favicon.ico">
    <meta name="description" content="学习学习在学习">
    
    <link rel="preload" href="/assets/css/0.styles.b9bba9f9.css" as="style"><link rel="preload" href="/assets/js/app.8d193749.js" as="script"><link rel="preload" href="/assets/js/3.892b1170.js" as="script"><link rel="preload" href="/assets/js/16.76b0d7e7.js" as="script"><link rel="prefetch" href="/assets/js/10.4a68515e.js"><link rel="prefetch" href="/assets/js/100.d555558e.js"><link rel="prefetch" href="/assets/js/101.3ead7240.js"><link rel="prefetch" href="/assets/js/102.e039e6b6.js"><link rel="prefetch" href="/assets/js/103.5364bae0.js"><link rel="prefetch" href="/assets/js/104.b94bb013.js"><link rel="prefetch" href="/assets/js/105.1f6b6c35.js"><link rel="prefetch" href="/assets/js/106.e6d1cb8e.js"><link rel="prefetch" href="/assets/js/107.25a2d7a1.js"><link rel="prefetch" href="/assets/js/108.94bbceee.js"><link rel="prefetch" href="/assets/js/109.10a4c3da.js"><link rel="prefetch" href="/assets/js/11.d6c61798.js"><link rel="prefetch" href="/assets/js/110.14115edc.js"><link rel="prefetch" href="/assets/js/111.d5353052.js"><link rel="prefetch" href="/assets/js/112.4cc7c29d.js"><link rel="prefetch" href="/assets/js/113.dedc4732.js"><link rel="prefetch" href="/assets/js/114.134629d6.js"><link rel="prefetch" href="/assets/js/115.c7a86835.js"><link rel="prefetch" href="/assets/js/116.654f0da2.js"><link rel="prefetch" href="/assets/js/117.f3421fbc.js"><link rel="prefetch" href="/assets/js/118.4ef936b7.js"><link rel="prefetch" href="/assets/js/119.26fa552f.js"><link rel="prefetch" href="/assets/js/12.68ad377d.js"><link rel="prefetch" href="/assets/js/120.d1d797fa.js"><link rel="prefetch" href="/assets/js/121.78538e11.js"><link rel="prefetch" href="/assets/js/122.aa6a606e.js"><link rel="prefetch" href="/assets/js/123.4bddb251.js"><link rel="prefetch" href="/assets/js/124.f313e78b.js"><link rel="prefetch" href="/assets/js/125.32a7fbe4.js"><link rel="prefetch" href="/assets/js/126.c9ef1a0b.js"><link rel="prefetch" href="/assets/js/127.929ffe87.js"><link rel="prefetch" href="/assets/js/128.9f811cda.js"><link rel="prefetch" href="/assets/js/129.b1fabf66.js"><link rel="prefetch" href="/assets/js/13.8a4d1f28.js"><link rel="prefetch" href="/assets/js/130.e6cba4c8.js"><link rel="prefetch" href="/assets/js/131.41028247.js"><link rel="prefetch" href="/assets/js/132.959f7b31.js"><link rel="prefetch" href="/assets/js/133.bba663cd.js"><link rel="prefetch" href="/assets/js/134.4d028e55.js"><link rel="prefetch" href="/assets/js/135.95fdd070.js"><link rel="prefetch" href="/assets/js/136.2ff16aba.js"><link rel="prefetch" href="/assets/js/137.416ec285.js"><link rel="prefetch" href="/assets/js/138.ee5fc6d7.js"><link rel="prefetch" href="/assets/js/139.1854635a.js"><link rel="prefetch" href="/assets/js/14.721fab7a.js"><link rel="prefetch" href="/assets/js/140.70e1a07f.js"><link rel="prefetch" href="/assets/js/141.6df3e62f.js"><link rel="prefetch" href="/assets/js/142.69fdea5f.js"><link rel="prefetch" href="/assets/js/143.f0e21068.js"><link rel="prefetch" href="/assets/js/144.22396727.js"><link rel="prefetch" href="/assets/js/145.27be6a81.js"><link rel="prefetch" href="/assets/js/146.b52f4bea.js"><link rel="prefetch" href="/assets/js/147.735b2524.js"><link rel="prefetch" href="/assets/js/148.a5b3fbdc.js"><link rel="prefetch" href="/assets/js/149.e9db9554.js"><link rel="prefetch" href="/assets/js/15.df1979d9.js"><link rel="prefetch" href="/assets/js/150.c969aca7.js"><link rel="prefetch" href="/assets/js/151.aa1e6973.js"><link rel="prefetch" href="/assets/js/152.6b4a27ec.js"><link rel="prefetch" href="/assets/js/153.15a4d8cd.js"><link rel="prefetch" href="/assets/js/154.f9802bcb.js"><link rel="prefetch" href="/assets/js/155.4d830467.js"><link rel="prefetch" href="/assets/js/156.9a763f32.js"><link rel="prefetch" href="/assets/js/157.51a1e1b4.js"><link rel="prefetch" href="/assets/js/158.b51f4f52.js"><link rel="prefetch" href="/assets/js/159.e9af00c3.js"><link rel="prefetch" href="/assets/js/160.12649a05.js"><link rel="prefetch" href="/assets/js/161.3b1d9e13.js"><link rel="prefetch" href="/assets/js/162.02b8acc7.js"><link rel="prefetch" href="/assets/js/163.0d7b5618.js"><link rel="prefetch" href="/assets/js/164.5a94c95f.js"><link rel="prefetch" href="/assets/js/165.cf444ffe.js"><link rel="prefetch" href="/assets/js/166.f2a3eda1.js"><link rel="prefetch" href="/assets/js/167.949bacd4.js"><link rel="prefetch" href="/assets/js/168.c275a7f5.js"><link rel="prefetch" href="/assets/js/169.28f044b3.js"><link rel="prefetch" href="/assets/js/17.1189e359.js"><link rel="prefetch" href="/assets/js/170.3599f6e9.js"><link rel="prefetch" href="/assets/js/171.2a964ddc.js"><link rel="prefetch" href="/assets/js/172.4c745fd8.js"><link rel="prefetch" href="/assets/js/18.25ce29ef.js"><link rel="prefetch" href="/assets/js/19.39873d5d.js"><link rel="prefetch" href="/assets/js/2.ac34b83d.js"><link rel="prefetch" href="/assets/js/20.ac0c5572.js"><link rel="prefetch" href="/assets/js/21.e09a5317.js"><link rel="prefetch" href="/assets/js/22.aa8bcf26.js"><link rel="prefetch" href="/assets/js/23.f609a431.js"><link rel="prefetch" href="/assets/js/24.1e76b423.js"><link rel="prefetch" href="/assets/js/25.f90a175c.js"><link rel="prefetch" href="/assets/js/26.24d63652.js"><link rel="prefetch" href="/assets/js/27.69354912.js"><link rel="prefetch" href="/assets/js/28.7a6097d6.js"><link rel="prefetch" href="/assets/js/29.bf24677e.js"><link rel="prefetch" href="/assets/js/30.dd85d982.js"><link rel="prefetch" href="/assets/js/31.6992beb2.js"><link rel="prefetch" href="/assets/js/32.694c4982.js"><link rel="prefetch" href="/assets/js/33.03a1e3c3.js"><link rel="prefetch" href="/assets/js/34.ed95eeed.js"><link rel="prefetch" href="/assets/js/35.4189a503.js"><link rel="prefetch" href="/assets/js/36.5052fb9e.js"><link rel="prefetch" href="/assets/js/37.f246e8b1.js"><link rel="prefetch" href="/assets/js/38.a14a8bc1.js"><link rel="prefetch" href="/assets/js/39.23f4f352.js"><link rel="prefetch" href="/assets/js/4.9cf8d126.js"><link rel="prefetch" href="/assets/js/40.06d26080.js"><link rel="prefetch" href="/assets/js/41.5b71d3c6.js"><link rel="prefetch" href="/assets/js/42.a99421c0.js"><link rel="prefetch" href="/assets/js/43.5c63ca4e.js"><link rel="prefetch" href="/assets/js/44.a46dba7e.js"><link rel="prefetch" href="/assets/js/45.c59bc6d6.js"><link rel="prefetch" href="/assets/js/46.33453990.js"><link rel="prefetch" href="/assets/js/47.677a33f0.js"><link rel="prefetch" href="/assets/js/48.82059c13.js"><link rel="prefetch" href="/assets/js/49.48757b78.js"><link rel="prefetch" href="/assets/js/5.780300d6.js"><link rel="prefetch" href="/assets/js/50.1c23084c.js"><link rel="prefetch" href="/assets/js/51.b5491672.js"><link rel="prefetch" href="/assets/js/52.705a81d9.js"><link rel="prefetch" href="/assets/js/53.1d0d80f1.js"><link rel="prefetch" href="/assets/js/54.f6d77716.js"><link rel="prefetch" href="/assets/js/55.188b914f.js"><link rel="prefetch" href="/assets/js/56.9cb7278d.js"><link rel="prefetch" href="/assets/js/57.58b195a2.js"><link rel="prefetch" href="/assets/js/58.8cfd1c82.js"><link rel="prefetch" href="/assets/js/59.ba381b91.js"><link rel="prefetch" href="/assets/js/6.b844bad1.js"><link rel="prefetch" href="/assets/js/60.8d51a548.js"><link rel="prefetch" href="/assets/js/61.63ecb30b.js"><link rel="prefetch" href="/assets/js/62.89033979.js"><link rel="prefetch" href="/assets/js/63.c002965f.js"><link rel="prefetch" href="/assets/js/64.5dbf32e4.js"><link rel="prefetch" href="/assets/js/65.75753967.js"><link rel="prefetch" href="/assets/js/66.23f1b0b2.js"><link rel="prefetch" href="/assets/js/67.630add84.js"><link rel="prefetch" href="/assets/js/68.cfa7feb2.js"><link rel="prefetch" href="/assets/js/69.ca7c09c5.js"><link rel="prefetch" href="/assets/js/7.adea7b4a.js"><link rel="prefetch" href="/assets/js/70.4d66e7c7.js"><link rel="prefetch" href="/assets/js/71.b673f927.js"><link rel="prefetch" href="/assets/js/72.3706c1a9.js"><link rel="prefetch" href="/assets/js/73.cc781978.js"><link rel="prefetch" href="/assets/js/74.777a979f.js"><link rel="prefetch" href="/assets/js/75.6ea555de.js"><link rel="prefetch" href="/assets/js/76.1ec82a3f.js"><link rel="prefetch" href="/assets/js/77.8eac3b46.js"><link rel="prefetch" href="/assets/js/78.769cd188.js"><link rel="prefetch" href="/assets/js/79.04d0b03f.js"><link rel="prefetch" href="/assets/js/8.d26583c2.js"><link rel="prefetch" href="/assets/js/80.d4354c64.js"><link rel="prefetch" href="/assets/js/81.2a062926.js"><link rel="prefetch" href="/assets/js/82.9c554d55.js"><link rel="prefetch" href="/assets/js/83.1a996420.js"><link rel="prefetch" href="/assets/js/84.58dc2308.js"><link rel="prefetch" href="/assets/js/85.41604feb.js"><link rel="prefetch" href="/assets/js/86.58307d88.js"><link rel="prefetch" href="/assets/js/87.ade79885.js"><link rel="prefetch" href="/assets/js/88.0707a64a.js"><link rel="prefetch" href="/assets/js/89.223d8f8b.js"><link rel="prefetch" href="/assets/js/9.90b99de1.js"><link rel="prefetch" href="/assets/js/90.05e3620d.js"><link rel="prefetch" href="/assets/js/91.79a4af0b.js"><link rel="prefetch" href="/assets/js/92.36e55166.js"><link rel="prefetch" href="/assets/js/93.6bbda014.js"><link rel="prefetch" href="/assets/js/94.aa23d41e.js"><link rel="prefetch" href="/assets/js/95.f4dc6efd.js"><link rel="prefetch" href="/assets/js/96.36ce736d.js"><link rel="prefetch" href="/assets/js/97.a0c29600.js"><link rel="prefetch" href="/assets/js/98.9583dd8f.js"><link rel="prefetch" href="/assets/js/99.486a0635.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b9bba9f9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/avatar.png" alt="chenglun17 blog" class="logo"> <span class="site-name can-hide">chenglun17 blog </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  快速了解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/DS/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/cs/OS/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/cs/CN/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/cs/CO/" class="nav-link">
  计算机组成原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/troika/html_css_study/" class="nav-link">
  HTML/CSS
</a></li><li class="dropdown-item"><!----> <a href="/troika/js_study/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/troika/WebAPI_Interface/" class="nav-link router-link-active">
  Web API 接口
</a></li><li class="dropdown-item"><!----> <a href="/troika/various_functions/" class="nav-link">
  各种功能
</a></li><li class="dropdown-item"><!----> <a href="/troika/promise_study/" class="nav-link">
  Promise
</a></li><li class="dropdown-item"><!----> <a href="/troika/ajax_study/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/troika/axios_study/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/troika/webpack_study/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/troika/babel_study/" class="nav-link">
  Babel
</a></li><li class="dropdown-item"><!----> <a href="/troika/TypeScript_Study/" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/vue_study/" class="nav-link">
  Vue2.x
</a></li><li class="dropdown-item"><!----> <a href="/frame/vue3_study/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/frame/VueInterview/" class="nav-link">
  Vue面试相关
</a></li><li class="dropdown-item"><!----> <a href="/frame/react_study/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frame/Bootstrap_study/" class="nav-link">
  Bootstrap
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他学习" class="dropdown-title"><span class="title">其他学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他学习" class="mobile-dropdown-title"><span class="title">其他学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/nodejs_study/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/others/git_study/" class="nav-link">
  Git/Tortoisegit
</a></li><li class="dropdown-item"><!----> <a href="/others/regex_study/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/others/linux_study/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><span class="title">移动端</span> <span class="arrow down"></span></button> <button type="button" aria-label="移动端" class="mobile-dropdown-title"><span class="title">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mobile/miniprogram_study/" class="nav-link">
  小程序学习
</a></li><li class="dropdown-item"><!----> <a href="/mobile/uni-app_study/" class="nav-link">
  uni-app
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java后端" class="dropdown-title"><span class="title">Java后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java后端" class="mobile-dropdown-title"><span class="title">Java后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/java_core/" class="nav-link">
  Java核心基础
</a></li><li class="dropdown-item"><!----> <a href="/java/sql_study/" class="nav-link">
  SQL/MySQL
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/chenglun17" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  快速了解
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/DS/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/cs/OS/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/cs/CN/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/cs/CO/" class="nav-link">
  计算机组成原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/troika/html_css_study/" class="nav-link">
  HTML/CSS
</a></li><li class="dropdown-item"><!----> <a href="/troika/js_study/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/troika/WebAPI_Interface/" class="nav-link router-link-active">
  Web API 接口
</a></li><li class="dropdown-item"><!----> <a href="/troika/various_functions/" class="nav-link">
  各种功能
</a></li><li class="dropdown-item"><!----> <a href="/troika/promise_study/" class="nav-link">
  Promise
</a></li><li class="dropdown-item"><!----> <a href="/troika/ajax_study/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/troika/axios_study/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/troika/webpack_study/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/troika/babel_study/" class="nav-link">
  Babel
</a></li><li class="dropdown-item"><!----> <a href="/troika/TypeScript_Study/" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/vue_study/" class="nav-link">
  Vue2.x
</a></li><li class="dropdown-item"><!----> <a href="/frame/vue3_study/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/frame/VueInterview/" class="nav-link">
  Vue面试相关
</a></li><li class="dropdown-item"><!----> <a href="/frame/react_study/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frame/Bootstrap_study/" class="nav-link">
  Bootstrap
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他学习" class="dropdown-title"><span class="title">其他学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他学习" class="mobile-dropdown-title"><span class="title">其他学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/nodejs_study/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/others/git_study/" class="nav-link">
  Git/Tortoisegit
</a></li><li class="dropdown-item"><!----> <a href="/others/regex_study/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/others/linux_study/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><span class="title">移动端</span> <span class="arrow down"></span></button> <button type="button" aria-label="移动端" class="mobile-dropdown-title"><span class="title">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mobile/miniprogram_study/" class="nav-link">
  小程序学习
</a></li><li class="dropdown-item"><!----> <a href="/mobile/uni-app_study/" class="nav-link">
  uni-app
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java后端" class="dropdown-title"><span class="title">Java后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java后端" class="mobile-dropdown-title"><span class="title">Java后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/java_core/" class="nav-link">
  Java核心基础
</a></li><li class="dropdown-item"><!----> <a href="/java/sql_study/" class="nav-link">
  SQL/MySQL
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/chenglun17" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/troika/html_css_study/" class="sidebar-heading clickable"><span>HTML/CSS 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/js_study/" class="sidebar-heading clickable"><span>JavaScript 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/WebAPI_Interface/" class="sidebar-heading clickable router-link-active open"><span>Web API 接口</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/troika/WebAPI_Interface/Blob.html" class="sidebar-link">Blob</a></li><li><a href="/troika/WebAPI_Interface/Canvas.html" aria-current="page" class="active sidebar-link">Canvas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_1-什么是-canvas" class="sidebar-link">1.什么是 Canvas</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_2-canvas-api" class="sidebar-link">2.Canvas API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#htmlcanvaselement" class="sidebar-link">HTMLCanvasElement</a></li></ul></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_3-canvas-基本使用" class="sidebar-link">3.Canvas 基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#canvas-元素" class="sidebar-link">&lt;canvas&gt;元素</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#渲染上下文" class="sidebar-link">渲染上下文</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#坐标系" class="sidebar-link">坐标系</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#浏览器是否支持" class="sidebar-link">浏览器是否支持</a></li></ul></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_4-绘制基础图形" class="sidebar-link">4.绘制基础图形</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#绘制线段" class="sidebar-link">绘制线段</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#给线段设置样式" class="sidebar-link">给线段设置样式</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#绘制三角形" class="sidebar-link">绘制三角形</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#绘制矩形" class="sidebar-link">绘制矩形</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#绘制圆弧" class="sidebar-link">绘制圆弧</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#绘制椭圆" class="sidebar-link">绘制椭圆</a></li></ul></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_5-绘制贝塞尔曲线" class="sidebar-link">5.绘制贝塞尔曲线</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#一次贝塞尔曲线-线性贝塞尔曲线" class="sidebar-link">一次贝塞尔曲线 (线性贝塞尔曲线)</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#二次贝塞尔曲线" class="sidebar-link">二次贝塞尔曲线</a></li></ul></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_6-绘制文本" class="sidebar-link">6.绘制文本</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_7-设置样式和颜色" class="sidebar-link">7.设置样式和颜色</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#渐变色" class="sidebar-link">渐变色</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#添加指定元素" class="sidebar-link">添加指定元素</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#阴影样式" class="sidebar-link">阴影样式</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#透明度" class="sidebar-link">透明度</a></li></ul></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_8-绘制图片" class="sidebar-link">8.绘制图片</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#_9-使用场景" class="sidebar-link">9.使用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#canvas-实现-html-页面转为图片" class="sidebar-link">Canvas 实现 HTML 页面转为图片</a></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#canvas-实现图片压缩上传" class="sidebar-link">Canvas 实现图片压缩上传</a></li></ul></li><li class="sidebar-sub-header"><a href="/troika/WebAPI_Interface/Canvas.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/troika/WebAPI_Interface/FormData.html" class="sidebar-link">FormData</a></li><li><a href="/troika/WebAPI_Interface/FileReader.html" class="sidebar-link">FileReader</a></li><li><a href="/troika/WebAPI_Interface/WebSocket.html" class="sidebar-link">WebSocket</a></li><li><a href="/troika/WebAPI_Interface/WebWorker.html" class="sidebar-link">Web Worker</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/various_functions/" class="sidebar-heading clickable"><span>各种功能实现</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/promise_study/" class="sidebar-heading clickable"><span>Promise 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/ajax_study/" class="sidebar-heading clickable"><span>Ajax 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/axios_study/" class="sidebar-heading clickable"><span>Axios 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/webpack_study/" class="sidebar-heading clickable"><span>Webpack 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/babel_study/" class="sidebar-heading clickable"><span>Babel 学习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/troika/TypeScript_Study/" class="sidebar-heading clickable"><span>TypeScript 学习</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="canvas"><a href="#canvas" class="header-anchor">#</a> Canvas</h1> <h2 id="_1-什么是-canvas"><a href="#_1-什么是-canvas" class="header-anchor">#</a> 1.什么是 Canvas</h2> <p>简单来说，<code>&lt;canvas&gt;</code> 是 HTML5 中的标签，它是一个容器，可以使用JS在其中绘制图形或文字。</p> <p>canvas 标签是一张画布</p> <h2 id="_2-canvas-api"><a href="#_2-canvas-api" class="header-anchor">#</a> 2.Canvas API</h2> <p><strong>Canvas API</strong> 提供了一个通过 JavaScript 和 HTML 的<code>canvas</code>元素来绘制图形的方式。它可以用于动画、游戏画面、数据可视化、图片编辑以及实时视频处理等方面。</p> <p>Canvas API 主要聚焦于 2D 图形。而同样使用<code>&lt;canvas&gt;</code>元素的 WebGL API 则用于绘制硬件加速的 2D 和 3D 图形。</p> <h3 id="htmlcanvaselement"><a href="#htmlcanvaselement" class="header-anchor">#</a> HTMLCanvasElement</h3> <p>**<code>HTMLCanvasElement</code>**接口提供用于操纵<code>&lt;canvas&gt;</code>元素的布局和表示的属性和方法。</p> <p>**<code>HTMLCanvasElement</code>**接口还继承了<code>HTMLElement</code>接口的属性和方法。</p> <h4 id="getcontext"><a href="#getcontext" class="header-anchor">#</a> getContext()</h4> <p>该方法返回<code>canvas</code> 的上下文，如果上下文没有定义则返回 <code>null</code> 。</p> <p>在同一个 canvas 上以相同的 <code>contextType</code> 多次调用此方法只会返回同一个上下文。</p> <h4 id="todataurl"><a href="#todataurl" class="header-anchor">#</a> toDataURL()</h4> <p>该方法返回一个包含图片展示的 data URL 。</p> <div class="language-js extra-class"><pre class="language-js"><code>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> encoderOptions<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li><code>type</code>：可选，图片格式，默认为 <code>image/png</code></li> <li><code>encoderOptions</code>：可选，在指定图片格式为 <code>image/jpeg</code> 或 <code>image/webp</code> 的情况下，可以从 0 到 1 的区间内选择图片的质量。如果超出取值范围，将会使用默认值 <code>0.92</code>。其他参数会被忽略。</li></ul></blockquote> <p>可以使用 <code>type</code> 参数其类型，默认为 PNG 格式。图片的分辨率为 96dpi。</p> <p><strong>Data URL</strong>：</p> <p><strong>Data URL</strong>，即 <strong style="color:#DD5145;">前缀为 <code>data:</code> 协议的 URL</strong>，其允许内容创建者向文档中嵌入小文件。</p> <p>Data URL 由四个部分组成：<strong style="color:#DD5145;">前缀(<code>data:</code>)、指示数据类型的 MIME 类型、如果非文本则为可选的<code>base64</code>标记、数据本身</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>mediatype<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">;</span>base64<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>data<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p>mediatype<code>是个 [MIME 类型](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types)的字符串</code></p> <p>例如<code>'image/jpeg'</code> 表示 JPEG 图像文件。如果被省略，则默认值为 `text/plain;charset=US-ASCII</p></blockquote> <p>MDN文档：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URLs</p> <h4 id="toblob"><a href="#toblob" class="header-anchor">#</a> toBlob()</h4> <p>该方法创造 <code>Blob</code> 对象，用以展示 canvas 上的图片。这个图片文件可以被缓存或保存到本地（由用户代理自行决定）。</p> <div class="language-js extra-class"><pre class="language-js"><code>canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> type<span class="token punctuation">,</span> quality<span class="token punctuation">)</span>
</code></pre></div><h2 id="_3-canvas-基本使用"><a href="#_3-canvas-基本使用" class="header-anchor">#</a> 3.Canvas 基本使用</h2> <h3 id="canvas-元素"><a href="#canvas-元素" class="header-anchor">#</a> &lt;canvas&gt;元素</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tutorial<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><code>&lt;canvas&gt;</code> 只有两个可选的属性<code>width、heigth</code>属性，默认<code>width</code>为300、<code>height</code>为150,单位都是<code>px</code>。</p> <p>设置画布的宽高只能在 html 标签里通过 height 和 width 属性来设置(canvas标签有且只有这两个属性)</p></blockquote> <p><strong>结束标签<code>&lt;/canvas&gt;</code>不可省</strong></p> <p><code>&lt;canvas&gt;</code>元素<strong>需要</strong>结束标签(<code>&lt;/canvas&gt;</code>)。如果结束标签不存在，则文档的其余部分会被认为是替代内容，将不会显示出来。</p> <h3 id="渲染上下文"><a href="#渲染上下文" class="header-anchor">#</a> 渲染上下文</h3> <p>渲染上下文(Thre Rending Context)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得 2D 上下文对象</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="坐标系"><a href="#坐标系" class="header-anchor">#</a> 坐标系</h3> <p><code>Canvas</code> 使用的是 <strong>W3C 坐标系</strong> ，也就是遵循我们屏幕、报纸的阅读习惯，从上往下，从左往右。</p> <p><img src="/assets/img/canvas坐标系.e2018b98.png" alt=""></p> <h3 id="浏览器是否支持"><a href="#浏览器是否支持" class="header-anchor">#</a> 浏览器是否支持</h3> <p>那么在 canvas 标签中的文字就派上用场了，浏览器上会显示出你 canvas 标签里的文字</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token punctuation">&gt;</span></span>你的浏览器不支持canvas，快去升级浏览器吧！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>或</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//开始代码</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-绘制基础图形"><a href="#_4-绘制基础图形" class="header-anchor">#</a> 4.绘制基础图形</h2> <h3 id="绘制线段"><a href="#绘制线段" class="header-anchor">#</a> 绘制线段</h3> <ul><li><strong style="color:orange;"><code>moveTo(x,y)</code></strong>：定义画线的起始点</li> <li><strong style="color:orange;"><code>lineTo(x,y)</code></strong>：定义画线的折点</li> <li><strong style="color:orange;"><code>stroke()</code></strong>：通过线条来绘制图形轮廓</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">#canvas</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 8px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// 起点为(100，100)</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="给线段设置样式"><a href="#给线段设置样式" class="header-anchor">#</a> 给线段设置样式</h3> <ul><li><strong style="color:orange;"><code>strokeStyle = '颜色'</code></strong>：设置图形轮廓的颜色（设置线的颜色）</li> <li><strong style="color:orange;"><code>lineWidth = 数字</code></strong>：设置线的宽度</li> <li><strong style="color:orange;"><code>lineCap = 'round/butt/square'</code></strong>：设置线帽为圆型/默认/方形</li> <li><strong style="color:orange;"><code>lineJoin = 'miter/round/bevel'</code></strong>：设置线段连接处为默认/圆形/平直形式</li> <li><strong style="color:orange;"><code>globalAlpha = 数字</code></strong>：设置图案的透明度</li></ul> <blockquote><p>样式的设置必须写在绘制图形轮廓<code>stroke()</code>方法<strong>之前</strong>！否则会不生效</p></blockquote> <p>如果我们想分别设置每条线的样式，就需要用到下面两个方法（否则第二条线的颜色“覆盖”了第一条线的颜色）：</p> <ul><li><strong style="color:orange;"><code>beginPath()</code></strong>：开启一条新路径，生成之后，图形绘制命令会被指向到新路径上</li> <li><strong style="color:orange;"><code>closePath()</code></strong>：关闭上一条路径的绘制</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    <span class="token comment">// 绘制第一条线：</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'skyblue'</span> <span class="token comment">// 设置为天蓝色</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span>
    ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">'round'</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 绘制第二条线：</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'red'</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span>
    ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">'round'</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="绘制三角形"><a href="#绘制三角形" class="header-anchor">#</a> 绘制三角形</h3> <p>画三角形其实也是用画线段的思路，只需要注意首尾点连接起来即可：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> 
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">// 第四个点要和第一个点的坐标一致才能画出三角形</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'skyblue'</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 它会把线段的终点和起点连接起来，这样看上去就更更衔接了（线段宽度很大的时候很明显）</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="绘制矩形"><a href="#绘制矩形" class="header-anchor">#</a> 绘制矩形</h3> <h4 id="空心矩形"><a href="#空心矩形" class="header-anchor">#</a> 空心矩形</h4> <ul><li><p><strong>方法一</strong>：直接使用线段绘制矩形</p></li> <li><p><strong>方法二</strong>：直接使用<code>ctx</code>身上的<strong style="color:orange;"><code>strokeRect()</code></strong>方法</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">strokeRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
<span class="token comment">// x, y 表示起点坐标，width 表示矩形宽，height 表示矩形高</span>
</code></pre></div><ul><li><strong>方法三</strong>：把<code>strokeRect()</code>方法拆成了<strong style="color:orange;"><code>stroke()</code></strong>和<strong style="color:orange;"><code>rect()</code></strong>方法，好处就是使用<code>rect()</code>暂时生成了矩形，但是必须调用<code>stroke()</code>方法才会绘制出来</li></ul> <p>例如，可以使用下面的方式延迟两秒钟再绘制矩形：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="填充矩形"><a href="#填充矩形" class="header-anchor">#</a> 填充矩形</h4> <ul><li><strong>方法一</strong>：直接使用<code>ctx</code>身上的<strong style="color:orange;"><code>fillRect()</code></strong>方法以及<strong style="color:orange;"><code>fillStyle</code></strong>属性</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>fillStyle <span class="token operator">=</span> <span class="token string">'颜色'</span> <span class="token comment">// 填充颜色一定要写在生成矩形（fillRect()）之前，否则颜色不生效</span>

<span class="token function">fillRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>x, y 表示起点坐标</li> <li>width 表示矩形宽，height 表示矩形高</li></ul></blockquote> <ul><li><strong>方法二</strong>：这种方法和绘制空心矩形的第三种方法很像，只需要用<strong style="color:orange;"><code>fill()</code></strong>方法替代<code>stroke()</code>方法即可</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token comment">// 先用rect()方法生成矩形</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 再用fill()方法绘制填充矩形</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>这里使用的<code>fill()</code>方法和<code>stroke()</code>方法都是用来绘制出来形状，只不过前者是填充绘制，后者是用线轮廓。</p></blockquote> <h3 id="绘制圆弧"><a href="#绘制圆弧" class="header-anchor">#</a> 绘制圆弧</h3> <h4 id="方法一"><a href="#方法一" class="header-anchor">#</a> 方法一</h4> <p>使用<strong style="color:orange;"><code>arc()</code></strong>方法生成圆，再使用<code>stroke()</code>方法绘制圆。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> startAngle<span class="token punctuation">,</span> endAngle<span class="token punctuation">,</span> anticlockwise<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>以<code>(x, y)</code>为圆心，以<code>r</code>为半径，从 <code>startAngle</code>弧度开始到<code>endAngle</code>弧度结束</li> <li><code>anticlosewise</code>是布尔值，<code>true</code>表示逆时针，<code>false</code>表示顺时针。(默认是顺时针)</li></ul></blockquote> <p><img src="/assets/img/canvas绘制圆弧.5b8c7268.png" alt=""></p> <p>注意：</p> <blockquote><ul><li>这里的度数都是弧度</li> <li><code>0</code>弧度是指的<code>x</code>轴正方形</li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>radians<span class="token operator">=</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token operator">*</span>degrees   <span class="token comment">// 角度转换成弧度</span>
<span class="token comment">// (Math.PI) / 180 = 1°</span>
</code></pre></div><h4 id="方法二"><a href="#方法二" class="header-anchor">#</a> 方法二</h4> <p>使用<strong style="color:orange;"><code>arcTo()</code></strong>方法来绘制圆弧，它接收四个参数，在它前边会有一个开始点坐标，一般由<strong style="color:orange;"><code>moveTo()</code></strong>或<strong style="color:orange;"><code>lineTo()</code></strong>方法提供。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">acrTo</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> radius<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>cx，cy 表示两切线交点位置</li> <li>x2，y2 表示结束点坐标</li> <li>radius 表示半径</li></ul></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> cnv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> cnv<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token comment">// 定义线段的起点</span>
    ctx<span class="token punctuation">.</span><span class="token function">arcTo</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// 切线交点坐标为(400,100)，结束点为(400,500)</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/assets/img/canvas绘制圆弧.5b8c7268.png" alt=""></p> <h3 id="绘制椭圆"><a href="#绘制椭圆" class="header-anchor">#</a> 绘制椭圆</h3> <p>使用<strong style="color:orange;"><code>ellipse()</code></strong>方法来绘制椭圆</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">ellipse</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radiusX<span class="token punctuation">,</span> radiusY<span class="token punctuation">,</span> rotation<span class="token punctuation">,</span> startAngle<span class="token punctuation">,</span> endAngle<span class="token punctuation">,</span> anticlockwise<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>x，y 表示圆心坐标，radiusX，radiusY 分别表示x轴、y轴半径</li> <li>rotation 表示椭圆旋转角度</li> <li>rotation，startAngle 分别表示开始、结束绘制点</li> <li>anticlockwise 表示绘制方向，逆时针为 true，顺时针为 false（默认为 false）</li></ul></blockquote> <h2 id="_5-绘制贝塞尔曲线"><a href="#_5-绘制贝塞尔曲线" class="header-anchor">#</a> 5.绘制贝塞尔曲线</h2> <p>贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。</p> <p>一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋，我们在绘图工具上看到的钢笔工具就是来做这种矢量曲线的。</p> <p><a href="http://blogs.sitepointstatic.com/examples/tech/canvas-curves/quadratic-curve.html" target="_blank" rel="noopener noreferrer">在线调试二次贝塞尔曲线的小工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="一次贝塞尔曲线-线性贝塞尔曲线"><a href="#一次贝塞尔曲线-线性贝塞尔曲线" class="header-anchor">#</a> 一次贝塞尔曲线 (线性贝塞尔曲线)</h3> <p>一次贝塞尔曲线其实是一条直线。</p> <p><img src="/assets/img/40655077.f3c499fc.jpg" alt="一次贝塞尔曲线"></p> <h3 id="二次贝塞尔曲线"><a href="#二次贝塞尔曲线" class="header-anchor">#</a> 二次贝塞尔曲线</h3> <p><img src="/assets/img/94917354.e40165c7.jpg" alt="二次贝塞尔曲线"></p> <p>使用<strong style="color:orange;"><code>quadraticCurveTo()</code></strong>方法来绘制二次贝塞尔曲线：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span>cp1x<span class="token punctuation">,</span> cp1y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>cp1x，cp1y 表示控制点坐标</li> <li>x，y 表示结束点坐标</li></ul></blockquote> <p>同<code>arcTo()</code>方法一样，在它前边也会有一个开始点坐标，一般由<code>moveTo()</code>或<code>lineTo()</code>方法提供，例如：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;#333&quot;</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">457</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/assets/img/二次贝塞尔曲线.a0be2e2f.png" alt=""></p> <h2 id="_6-绘制文本"><a href="#_6-绘制文本" class="header-anchor">#</a> 6.绘制文本</h2> <p><strong>绘制文本</strong>：</p> <p>使用<strong style="color:orange;"><code>strokeText()</code></strong>方法接收四个参数绘制<strong>描边文本</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">strokeText</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> maxWidth<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>text：需要绘制的文字</li> <li>x，y：文本左下角起始坐标</li> <li>maxWidth：文本的最大宽度</li></ul></blockquote> <p>和<code>strokeText()</code>方法类似，使用<strong style="color:orange;"><code>fillStroke()</code></strong>方法绘制填充文本：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fillText</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> maxWidth<span class="token punctuation">)</span>
</code></pre></div><p><strong>设置文本样式</strong>：</p> <blockquote><ul><li><p><code>.font</code>设置文本大小和字体。</p></li> <li><p><code>.textAlign</code>：设置文本的对齐方式，可选<code>left</code>/<code>right</code>/<code>center</code>/<code>start</code>/<code>end</code>，</p> <p>对齐方式是以文本对<code>strokeText()</code>方法中坐标参数为参考的水平方向对齐方式。</p></li> <li><p><code>.textBaseline</code>：决定了文本在垂直方向的对齐方式，可选<code>alphabetic</code>/<code>top</code>/<code>hanging</code>/<code>middle</code>/<code>ideographic</code>/<code>bottom</code>。</p></li> <li><p><code>.direction</code>：设置文本的绘制方向，可选<code>ltr</code>(left to right)和<code>rtl</code>(right to left)。</p></li></ul></blockquote> <p><strong>获取文本宽度</strong>：</p> <p>可以使用<strong style="color:orange;"><code>measureText()</code></strong>方法测量文本的宽度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">measureText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>文本长度的测量结果<strong>只</strong>和文本的<code>font</code>参数相关。</p></blockquote> <h2 id="_7-设置样式和颜色"><a href="#_7-设置样式和颜色" class="header-anchor">#</a> 7.设置样式和颜色</h2> <h3 id="渐变色"><a href="#渐变色" class="header-anchor">#</a> 渐变色</h3> <h4 id="_1-线性渐变"><a href="#_1-线性渐变" class="header-anchor">#</a> 1. 线性渐变</h4> <p>使用<code>createLinearGradient()</code>来创建线性渐变色：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">createLinearGradient</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> <span class="token punctuation">,</span>y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>x1，y1 表示渐变色起点坐标</li> <li>x2，y2 表示终点坐标</li></ul></blockquote> <p>使用<code>addColorStop()</code>添加渐变色</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">addColorStop</span><span class="token punctuation">(</span>offset<span class="token punctuation">,</span> color<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>offset 表示偏移值</li> <li>color 表示渐变色</li></ul></blockquote> <p>例如</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 获取 canvas 元素</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建渐变</span>
    <span class="token keyword">var</span> gradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一个偏移值为0</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;#fffc96&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一个偏移值为1</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_2-径向渐变"><a href="#_2-径向渐变" class="header-anchor">#</a> 2. 径向渐变</h4> <p>同线性渐变的唯一区别就是，径向渐变是通过<code>createRadialGradient()</code>方法来创建渐变色：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">createRadialGradient</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span> y0<span class="token punctuation">,</span> r0<span class="token punctuation">,</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> r1<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>x0，y0 表示开始圆的圆心坐标</li> <li>r0 表示开始圆的半径</li> <li>x1，x2 表示结束圆的圆心坐标</li> <li>r1 表示结束圆的半径</li></ul></blockquote> <h3 id="添加指定元素"><a href="#添加指定元素" class="header-anchor">#</a> 添加指定元素</h3> <p>使用<code>createPattern()</code>方法接收两个参数来添加指定元素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">createPattern</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> type<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>pattern 表示要添加的元素，可以是图片，视频，canvas对象</li> <li>type 表示绘制类型，可选 repeat / no-repeat / repeat-x(沿x轴平铺) / repeat-y(沿y轴平铺)</li></ul></blockquote> <h3 id="阴影样式"><a href="#阴影样式" class="header-anchor">#</a> 阴影样式</h3> <p>文本和图形都可以设置阴影样式，且方法一样：</p> <ul><li><code>shadowOffsetX = 数字</code>：设置阴影在X轴上的延申距离，正值表示阴影向x轴正方向延申，负值表示阴影向x轴负方向延申</li> <li><code>shadowOffsetY = 数字</code>：设置阴影在Y轴上的延申距离，正值表示阴影向y轴正方向延申，负值表示阴影向y轴负方向延申</li> <li><code>shadowBlur = 数字</code>：设定阴影的模糊度，默认为0</li> <li><code>shadowColor = '颜色'</code>：设置阴影的颜色，默认是全透明色</li></ul> <h3 id="透明度"><a href="#透明度" class="header-anchor">#</a> 透明度</h3> <p><code>Transparency(透明度)</code>，globalAlpha = transparencyValue</p> <p>这个属性影响到 canvas 里所有图形的透明度，有效的值范围是 0.0 （完全透明）到 1.0（完全不透明），默认是 1.0。</p> <p><code>globalAlpha</code> 属性在需要绘制大量拥有相同透明度的图形时候相当高效。不过，使用<code>rgba()</code>设置透明度更加好一些。</p> <h2 id="_8-绘制图片"><a href="#_8-绘制图片" class="header-anchor">#</a> 8.绘制图片</h2> <p>使用<strong style="color:orange;"><code>drawImage()</code></strong>方法绘制图形，该方法可以接收3-9个参数进行拉伸、裁剪等。</p> <p>例如，基础的绘制图片接收3个参数即可：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>img 表示需要绘制的图片</li> <li>x，y 表示图片放在画布的位置（左上角）</li></ul></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>700<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建一个图片对象：</span>
    <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://panpan.dapanna.cn//image-20221009113426344.png'</span><span class="token punctuation">;</span>
    <span class="token comment">// 图片加载完成之后绘制图片：</span>
    img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在(0,0)处绘制原图</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>绘制的图片都是用js生成的image对象，我们也可以使用现有的DOM对象来绘制</p></blockquote> <p>如果要<strong>拉伸</strong>图片到指定宽和高，要在<code>drawImage()</code>方法上多加两个参数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>img 表示需要绘制的图片</li> <li>x，y 表示图片放在画布的位置（左上角）</li> <li>width，height 表示拉伸的宽度、高度</li></ul></blockquote> <p><code>drawImage()</code>方法再加4个参数可以绘制拉伸和裁剪之后的图片：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> sWidth<span class="token punctuation">,</span> sHeight<span class="token punctuation">,</span> dx<span class="token punctuation">,</span> dy<span class="token punctuation">,</span> dWidth<span class="token punctuation">,</span> dHeight<span class="token punctuation">)</span>
</code></pre></div><blockquote><ul><li>img 表示需要绘制的图片</li> <li>sx，sy 表示开始裁剪的图片位置</li> <li>sWidth，sHeight 表示要裁剪图片的宽度、高度</li> <li>dx，dy 表示图片左上角绘制的起始坐标</li> <li>dWidth，dHeight 表示拉伸的宽度、高度</li></ul></blockquote> <h2 id="_9-使用场景"><a href="#_9-使用场景" class="header-anchor">#</a> 9.使用场景</h2> <h3 id="canvas-实现-html-页面转为图片"><a href="#canvas-实现-html-页面转为图片" class="header-anchor">#</a> Canvas 实现 HTML 页面转为图片</h3> <p><strong>前端生成 PDF 的方法主要有两种</strong>：</p> <ul><li>一种是使用 HTML 转 PDF 库，例如 jsPDF、pdfmake 等</li> <li>另一种是使用 canvas 将 HTML 页面转换成图片，然后将图片转换为 PDF 格式。</li></ul> <h3 id="canvas-实现图片压缩上传"><a href="#canvas-实现图片压缩上传" class="header-anchor">#</a> Canvas 实现图片压缩上传</h3> <p><a href="https://blog.csdn.net/weixin_42159569/article/details/107003913" target="_blank" rel="noopener noreferrer">参考文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/Andrew83/article/details/88715222" target="_blank" rel="noopener noreferrer">参考文章2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_1-图片裁剪"><a href="#_1-图片裁剪" class="header-anchor">#</a> 1. 图片裁剪</h4> <p>大体的思路是将图片抽样显示在canvas上，然后用通过<code>canvas.toDataURL</code>方法得到 base64 字符串来实现压缩。</p> <p>1、首先需要一个文件域</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>压缩后的图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>compress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>选择的原图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>proper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2、定义全局需要的变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">active</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>image <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>imgOrientation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 设备方向</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token literal-property property">field</span><span class="token operator">:</span><span class="token string">'file'</span><span class="token punctuation">,</span><span class="token comment">// 上传文件的字段</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">'key'</span><span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 上传接口需要的附加参数</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 上传接口的请求头信息</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 压缩后的图片宽度 当为0时会用原图片的宽度</span>
        <span class="token literal-property property">quality</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token comment">// 压缩后图片的质量与原图的比例</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3、选择图片后读取图片信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 拿到选择的图片</span>
<span class="token function-variable function">preview</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token comment">// 单张上传，若需要多张上传此处需要做遍历</span>
        _this<span class="token punctuation">.</span><span class="token function">createRender</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 拿到图片后，读取文件并获取图片拍摄方向</span>
    <span class="token function-variable function">createRender</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token constant">URL</span><span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token constant">URL</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitURL<span class="token punctuation">,</span>
            blob <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>FileReader<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> imgFalse <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// imgFalse.setAttribute('style','display:none;');</span>
                imgFalse<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'proper'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>imgFalse<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                imgFalse<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    _this<span class="token punctuation">.</span>imgOrientation<span class="token operator">=</span>_this<span class="token punctuation">.</span><span class="token function">getPhotoOrientation</span><span class="token punctuation">(</span>imgFalse<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    _this<span class="token punctuation">.</span><span class="token function">compress</span><span class="token punctuation">(</span>blob <span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" target="_blank" rel="noopener noreferrer">MDN文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/nvgis/article/details/127316552" target="_blank" rel="noopener noreferrer">参考文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/u012468376/article/details/73350998" target="_blank" rel="noopener noreferrer">参考文章2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/30/2023, 11:13:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/troika/WebAPI_Interface/Blob.html" class="prev">
        Blob
      </a></span> <span class="next"><a href="/troika/WebAPI_Interface/FormData.html">
        FormData
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8d193749.js" defer></script><script src="/assets/js/3.892b1170.js" defer></script><script src="/assets/js/16.76b0d7e7.js" defer></script>
  </body>
</html>
