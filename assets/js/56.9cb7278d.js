(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{467:function(t,a,s){t.exports=s.p+"assets/img/babel-cli.330c6de7.png"},675:function(t,a,s){"use strict";s.r(a);var e=s(10),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" Babel")]),t._v(" "),a("p",[t._v("在编写 JavaScript 代码时，经常需要使用一些 JavaScript 中的新特性，而新特性在旧的浏览器中兼容性并不好。此时就导致我们无法使用一些新的特性。")]),t._v(" "),a("p",[t._v("但是我们现在希望能够使用新的特性，我们可以采用折中的方案。依然使用新特性编写代码，但是代码编写完成时我们可以通过一些工具将新代码转换为旧代码。")]),t._v(" "),a("p",[t._v("Babel 就是这样一个工具，"),a("strong",[t._v("可以将新的 js 语法转换为旧的 js，以提高代码的兼容性")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"babel-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-是什么"}},[t._v("#")]),t._v(" ⭐️Babel 是什么")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.babeljs.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel 官网"),a("OutboundLink")],1),t._v("是这样描述的："),a("code",[t._v("Babel is a JavaScript compiler.")]),t._v("，即 Babel 是一个 JavaScript 编译器。")]),t._v(" "),a("p",[t._v("Babel 是一个"),a("strong",[t._v("工具链")]),t._v("，主要用于将采用 ECMAScript 2015+ 语法编写的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。下面列出的是 Babel 能为你做的事情：")]),t._v(" "),a("ul",[a("li",[t._v("语法转换")]),t._v(" "),a("li",[t._v("通过 Polyfill 方式在目标环境中添加缺失的功能（通过引入第三方 polyfill 模块，例如 "),a("a",{attrs:{href:"https://github.com/zloirock/core-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("core-js"),a("OutboundLink")],1),t._v("）")]),t._v(" "),a("li",[t._v("源码转换（codemods）")])]),t._v(" "),a("h2",{attrs:{id:"安装-babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-babel"}},[t._v("#")]),t._v(" ⭐️安装 Babel")]),t._v(" "),a("p",[t._v("Babel 提供 babel-cli 工具，用于命令行转码：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" babel-cli\n")])])]),a("p",[t._v("检验是否安装成功")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("babel "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\n")])])]),a("h2",{attrs:{id:"配置-babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-babel"}},[t._v("#")]),t._v(" ⭐️配置 Babel")]),t._v(" "),a("ul",[a("li",[t._v("babel 的配置文件有几种"),a("code",[t._v(".babelrc.json")]),t._v("，"),a("code",[t._v("babel.config.json")])]),t._v(" "),a("li",[t._v("还可以直接"),a("code",[t._v("package.json")]),t._v(" 文件中配置")]),t._v(" "),a("li",[t._v("配置方法都一样，本文以"),a("code",[t._v("babel.config.json")]),t._v("配置文件为主")]),t._v(" "),a("li",[t._v("也建议使用"),a("code",[t._v("babel.config.json")]),t._v(" 格式的配置文件。 "),a("a",{attrs:{href:"https://github.com/babel/babel/blob/main/babel.config.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel 自身使用的就是这种格式"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("li",[t._v("主要是对预设(presets) 和 插件(plugins) 进行配置")])]),t._v(" "),a("h3",{attrs:{id:"_1-babel-config-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-babel-config-json"}},[t._v("#")]),t._v(" 1."),a("code",[t._v("babel.config.json")])]),t._v(" "),a("p",[t._v("在项目的根目录（"),a("code",[t._v("package.json")]),t._v(" 文件所在的目录）下创建一个名为 "),a("code",[t._v("babel.config.json")]),t._v(" 的文件，并输入如下内容：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("请参阅 "),a("a",{attrs:{href:"https://www.babeljs.cn/docs/config-files#project-wide-configuration",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("babel.config.json")]),t._v(" 文档"),a("OutboundLink")],1),t._v(" 以了解更多关于配置参数的信息。")]),t._v(" "),a("h3",{attrs:{id:"_2-babelrc-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-babelrc-json"}},[t._v("#")]),t._v(" 2."),a("code",[t._v(".babelrc.json")])]),t._v(" "),a("p",[t._v("在你的项目中创建名为 "),a("code",[t._v(".babelrc.json")]),t._v(" 的文件，并输入以下内容：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("请参阅 "),a("a",{attrs:{href:"https://www.babeljs.cn/docs/config-files#file-relative-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v(".babelrc 文档"),a("OutboundLink")],1),t._v(" 以了解更多关于配置参数的信息。")]),t._v(" "),a("h3",{attrs:{id:"_3-package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-package-json"}},[t._v("#")]),t._v(" 3."),a("code",[t._v("package.json")])]),t._v(" "),a("p",[t._v("或者，还可以选择将 "),a("a",{attrs:{href:"https://www.babeljs.cn/docs/configuration#babelrcjson",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v(".babelrc.json")]),a("OutboundLink")],1),t._v(" 中的配置信息作为 "),a("code",[t._v("babel")]),t._v(" 键（key）的值添加到 "),a("code",[t._v("package.json")]),t._v(" 文件中，如下所示：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-package"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"babel"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" ... "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" ... "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-用-javascript-编写配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-用-javascript-编写配置文件"}},[t._v("#")]),t._v(" 4.用 JavaScript 编写配置文件")]),t._v(" "),a("p",[t._v("你还可以用 JavaScript 来编写 "),a("code",[t._v("babel.config.js")]),t._v(" 和 "),a("code",[t._v(".babelrc.js")]),t._v(" 文件：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("api")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" presets "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        presets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        plugins\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"使用-babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-babel"}},[t._v("#")]),t._v(" ⭐️使用 Babel")]),t._v(" "),a("ul",[a("li",[t._v("单体文件")]),t._v(" "),a("li",[t._v("命令行")]),t._v(" "),a("li",[t._v("配合Webpack使用")])]),t._v(" "),a("h3",{attrs:{id:"核心库-babel-core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心库-babel-core"}},[t._v("#")]),t._v(" 核心库 @babel/core")]),t._v(" "),a("p",[t._v("Babel 的核心功能包含在 "),a("code",[t._v("@babel/core")]),t._v(" 模块中。看到 "),a("code",[t._v("core")]),t._v(" 这个词了吧，意味着"),a("strong",[t._v("核心")]),t._v("，没有它，无法使用 "),a("code",[t._v("babel")]),t._v(" 进行编译。")]),t._v(" "),a("p",[t._v("安装：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev @babel/core\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/core\n")])])]),a("p",[t._v("babel-core 的作用是把 js 代码分析成 ast（抽象语法树），方便各个插件分析语法进行相应的处理。")]),t._v(" "),a("p",[t._v("有些新语法在低版本 js 中是不存在的，如箭头函数，rest 参数，函数默认值等，这种语言层面的不兼容只能通过将代码转为 ast，分析其语法后再转为低版本 js。")]),t._v(" "),a("h3",{attrs:{id:"命令行工具-babel-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行工具-babel-cli"}},[t._v("#")]),t._v(" 命令行工具 @babel/cli")]),t._v(" "),a("p",[t._v("这是一个终端运行工具，内置的插件，运行你从终端使用 "),a("code",[t._v("babel")]),t._v(" 的工具。同样也需要安装：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/cli\n")])])]),a("p",[a("code",[t._v("babel")]),t._v(" 提供的命令行工具，主要是提供 "),a("code",[t._v("babel")]),t._v(" 这个命令")]),t._v(" "),a("p",[a("img",{attrs:{src:s(467),alt:""}})]),t._v(" "),a("h3",{attrs:{id:"插件-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugins"}},[t._v("#")]),t._v(" 插件 Plugins")]),t._v(" "),a("p",[a("code",[t._v("plugins")]),t._v(" 的本质是一个 "),a("code",[t._v("js")]),t._v(" 程序，指示着 "),a("code",[t._v("Babel")]),t._v(" 如何转换代码，如何解析代码。")]),t._v(" "),a("p",[t._v("例如"),a("code",[t._v("src/index.js")]),t._v("文件中编写了一个箭头函数，然而箭头函数在低版本浏览器是不兼容的，所以得进行代码转换。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 箭头函数, 返回值为1")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("官方提供了一个插件，用于将箭头函数转换为普通的函数：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/plugin-transform-arrow-functions\n")])])]),a("p",[t._v("安装完成后就可以通过命令行的方式来运行：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("npx babel src --out-dir lib "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("@babel/plugin-transform-arrow-functions\n")])])]),a("p",[t._v("结果在 "),a("code",[t._v("lib")]),t._v(" 目录中的代码被转换了：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("ES6+")]),t._v(" 有那么多语法，如果一个浏览器不支持 "),a("code",[t._v("ES6+")]),t._v(" ，那么我们不就需要安装很多这样的插件吗？")]),t._v(" "),a("p",[t._v("答案是不需要，下一节出现的"),a("code",[t._v("Presets")]),t._v("正是用于解决这种问题的。它是一组插件的集合，是一个将 "),a("code",[t._v("ES6+")]),t._v(" 转换为低版本代码的插件集合。可以使用官方的，也可以自己自定义。")]),t._v(" "),a("h3",{attrs:{id:"预设-preset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预设-preset"}},[t._v("#")]),t._v(" 预设 Preset")]),t._v(" "),a("p",[t._v("从上面的例子可知，我们要转换一些语法就得使用各种插件，并且添加到配置文件，如果每次项目需要的 babel 插件都差不多，而我们每次都要进行重复的下载，配置工作，这样效率是不是很低，很繁琐。")]),t._v(" "),a("p",[t._v("这个时候我们就可以利用"),a("code",[t._v("presets")]),t._v("这个功能，将一些常用的 babel 插件，配置放入预设中，下载直接将这个预设放入配置文件即可。")]),t._v(" "),a("p",[t._v("预设环境，根据你需要支持的环境（配合targets中的浏览器信息）自动决定适合你的 Babel 插件。")]),t._v(" "),a("p",[t._v("官方针对常用的环境编写了一些 preset，如下所示：")]),t._v(" "),a("ul",[a("li",[t._v("@babel/preset-env")]),t._v(" "),a("li",[t._v("@babel/preset-flow")]),t._v(" "),a("li",[t._v("@babel/preset-react")]),t._v(" "),a("li",[t._v("@babel/preset-typescript")])]),t._v(" "),a("p",[t._v("安装：preset-env 就是一堆 plugin 的集合")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/preset-env\n")])])]),a("p",[t._v("在"),a("code",[t._v("babel.config.json")]),t._v("中配置：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"babel-preset-env-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-preset-env-参数"}},[t._v("#")]),t._v(" @babel/preset-env 参数")]),t._v(" "),a("h5",{attrs:{id:"targets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#targets"}},[t._v("#")]),t._v(" "),a("code",[t._v("targets")])]),t._v(" "),a("p",[t._v("支持的目标浏览器的列表")]),t._v(" "),a("h5",{attrs:{id:"usebuiltins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usebuiltins"}},[t._v("#")]),t._v(" "),a("code",[t._v("useBuiltIns")])]),t._v(" "),a("p",[t._v("决定了babel打包时如何处理@babel/polyfilll 语句。参数有 entry、usage、false（默认值）。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("entry")]),t._v("，会将文件中 "),a("code",[t._v('import "@babel/polyfill"')]),t._v(" 语句结合 targets ，转换为一系列引入语句，去掉目标浏览器已支持的 polyfilll 模块，不管代码里有没有用到，只要目标浏览器不支持都会引入对应的 polyfilll 模块。")]),t._v(" "),a("li",[a("code",[t._v("usage")]),t._v("，不需要手动在代码里写 "),a("code",[t._v('import "@babel/polyfill"')]),t._v("，即按需加载")]),t._v(" "),a("li",[a("code",[t._v("false")]),t._v("，对 "),a("code",[t._v('import "@babel/polyfill"')]),t._v(" 不作任何处理，也不会自动引入")])]),t._v(" "),a("p",[t._v("有一点需要注意："),a("strong",{staticStyle:{color:"#DD5145"}},[t._v("配置此参数的值为 usage ，必须要同时设置 corejs ")]),t._v("(如果不设置，会给出警告，默认使用的是"),a("code",[t._v('"corejs": 2')]),t._v(") 。")]),t._v(" "),a("p",[t._v("corejs@2已停止维护，所有新的功能添加到corejs@3中，"),a("code",[t._v('"corejs": 3')]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"targets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"edge"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"17"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"firefox"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"60"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chrome"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"67"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"safari"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"11.1"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.6.5"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("同时把 js 文件中的引入语句（"),a("code",[t._v('import "@babel/polyfill"')]),t._v("）删掉，因为是按需引入了。所以没有必要再安装 "),a("code",[t._v("@babel/polyfill")]),t._v("，只需安装"),a("code",[t._v("@babel/core")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"垫片-ployfill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#垫片-ployfill"}},[t._v("#")]),t._v(" 垫片 Ployfill")]),t._v(" "),a("p",[a("strong",[t._v("polyfill")]),t._v(" 是对执行环境或其他功能的补充。")]),t._v(" "),a("p",[a("strong",[t._v("babel 默认只转换新的 JavaScript 语法")]),t._v("，比如箭头函数、扩展运算（spread）。")]),t._v(" "),a("p",[a("strong",[t._v("不会转换新的 API")]),t._v("，例如 Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise 等全局对象，以及一些定义在全局对象上的方法（比如 Object.assign）都不会转译。")]),t._v(" "),a("p",[t._v("因此"),a("code",[t._v("@babel/polyfill")]),t._v("和"),a("code",[t._v("@babel/runtime")]),t._v("就是为了解决新的API与全局对象或全局对象方法不足的问题。")]),t._v(" "),a("h4",{attrs:{id:"babel-polyfill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill"}},[t._v("#")]),t._v(" @babel/polyfill")]),t._v(" "),a("p",[a("code",[t._v("@babel/polyfill")]),t._v(" 的原理是当运行环境中并没有实现的一些方法，"),a("code",[t._v("@babel/polyfill")]),t._v(" 会做兼容。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" @babel/polyfill\n")])])]),a("p",[a("code",[t._v("@babel/polyfill")]),t._v(" 包括 "),a("code",[t._v("core-js")]),t._v(" 模块和一个自定义的 "),a("code",[t._v("regenerator runtime")]),t._v(" 模块，可以模拟完整的 ES2015+ 环境。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("core-js")]),t._v("：一个标准的库，所有新语法的 polyfill 的一个集合（注：ES6 中的 generator 函数，core-js 不能支持）")]),t._v(" "),a("li",[a("code",[t._v("regenerator")]),t._v("：为了解决 core-js 不支持 ES6 中的 generator 函数")])]),t._v(" "),a("p",[a("strong",{staticStyle:{color:"#DD5145"}},[t._v("从 Babel 7.4.0 起， @babel/polyfill 已经被官方弃用了")]),t._v("，推荐直接使用 core-js 和 regenerator。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//import "@babel/polyfill"; //之前的写法')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js/stable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"regenerator-runtime/runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[a("code",[t._v("regenerator-runtime")]),t._v(" 包其实可以不用手动安装，因为在安装 "),a("code",[t._v("@babel/preset-env")]),t._v(" 的时候会自动安装 "),a("code",[t._v("@babel/runtime")]),t._v("，而安装 "),a("code",[t._v("@babel/runtime")]),t._v(" 的时候会自动安装"),a("code",[t._v("regenerator-runtime")]),t._v(" 包。")])]),t._v(" "),a("p",[a("code",[t._v("@babel/polyfill")]),t._v(" 解决了 Babel 不转换新 API 的问题，但是它是直接通过向全局对象和内置对象的 prototype 上添加方法来实现的，"),a("strong",[t._v("会导致污染了全局环境")]),t._v("，并且不同的代码文件中包含重复的代码，"),a("strong",[t._v("导致编译后的代码体积变大")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"babel-runtime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-runtime"}},[t._v("#")]),t._v(" @babel/runtime")]),t._v(" "),a("p",[t._v("它是将 ES6 编译成 ES5 去执行。我们使用 ES6 的语法来编写，最终会通过"),a("code",[t._v("@babel/runtime")]),t._v("编译成 ES5。也就是说，不管浏览器是否支持 ES6，只要是 ES6 的语法，它都会进行转码成 ES5，所以就有很多冗余的代码。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("@babel/runtime")]),t._v("它不会污染全局对象和内置对象的原型")]),t._v(" "),a("li",[a("code",[t._v("@babel/runtime")]),t._v("无法做到智能化分析，"),a("strong",[t._v("需要我们手动引入")])]),t._v(" "),a("li",[a("code",[t._v("@babel/runtime")]),t._v("编译过程中会重复生成冗余代码")])]),t._v(" "),a("p",[t._v("虽然 "),a("code",[t._v("@babel/runtime")]),t._v(" 可以解决 "),a("code",[t._v("@babel/polyfill")]),t._v(" 中的避免污染全局对象，但是它自己也有缺点的，例如现在有100个文件甚至更多，难道我需要一个个引入吗？")]),t._v(" "),a("ul",[a("li",[t._v("因此出现了 "),a("code",[t._v("@babel/plugin-transform-runtime")]),t._v("，它可以帮助我们去避免手动引入 import 的痛苦，并且它还做了公用方法的抽离。")]),t._v(" "),a("li",[t._v("比如说我们有100个模块都使用 promise，但是 promise 的 polyfill 仅仅存在1份。")])]),t._v(" "),a("h4",{attrs:{id:"babel-plugin-transform-runtime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-transform-runtime"}},[t._v("#")]),t._v(" @babel/plugin-transform-runtime")]),t._v(" "),a("p",[t._v("一个插件，可以重用 Babel 注入的帮助程序代码以节省代码大小。")]),t._v(" "),a("p",[t._v("安装 "),a("code",[t._v("@babel/plugin-transform-runtime")]),t._v(" 作为开发依赖（使用 --save-dev）的同时，也需要安装 "),a("code",[t._v("@babel/runtime")]),t._v(" 作为生产依赖（使用 --save）。这个看 vue-cli 生成的 "),a("code",[t._v("package.json")]),t._v(" 就能发现。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/plugin-transform-runtime\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" @babel/runtime\n")])])]),a("p",[a("code",[t._v("@babel/plugin-transform-runtime")]),t._v("插件会智能化的分析我们的项目中所使用到需要转译的"),a("code",[t._v("js")]),t._v("代码，从而实现模块化从"),a("code",[t._v("@babel/runtime")]),t._v("中引入所需的"),a("code",[t._v("polyfill")]),t._v("实现。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"absoluteRuntime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"helpers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"regenerator"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useESModules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("helpers：默认值为 true")]),t._v("，表示是否开启内联的 babel helpers (即 babel 或者环境本来存在的某些对象方法函数) 如：extends，etc这样的在调用模块名字时将被替换名字。")]),t._v(" "),a("li",[a("strong",[t._v("polyfill：默认值为true")]),t._v("，表示是否把内置的东西 (Promise, Set, Map) 等转换成非全局污染的。")]),t._v(" "),a("li",[t._v("**regenerator：默认值为true，**是否开启 generator 函数转换成使用 regenerator runtime 来避免污染全局域。")])]),t._v(" "),a("p",[t._v("所以 "),a("code",[t._v("@babel/plugin-transform-runtime")]),t._v(" 更适合开发工具包，库，一方面是体积够小，另一方面是用户（开发者）不会因为引用了我们的工具，包而污染了全局的原生方法，产生副作用，还是应该留给用户自己去选择。")]),t._v(" "),a("h2",{attrs:{id:"es6转es5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6转es5"}},[t._v("#")]),t._v(" ⭐️ES6转ES5")]),t._v(" "),a("p",[t._v("babel 是一个独立的工具，可以不在 webpack 中使用。")]),t._v(" "),a("p",[t._v("新建文件夹"),a("code",[t._v("demo")]),t._v("，并初始化项目：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v("\n")])])]),a("p",[t._v("安装依赖：建议本地安装，只需要在自己需要的用到babel的目录下执行以下命令即可")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/core @babel/cli @babel/preset-env\n")])])]),a("ul",[a("li",[a("code",[t._v("@babel/core")]),t._v("：babel 核心代码（必须安装）")]),t._v(" "),a("li",[a("code",[t._v("@babel/cli")]),t._v("：命令行工具")]),t._v(" "),a("li",[a("code",[t._v("@babel/preset-env")]),t._v("：预设环境")])]),t._v(" "),a("p",[t._v("根目录下新建"),a("code",[t._v("babel.config.json")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("新建文件"),a("code",[t._v("src/index.js")]),t._v("，使用ES6语法编写一段简单代码，例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("方式一：在命令行执行命令")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("babel src "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" dist\n")])])]),a("blockquote",[a("p",[t._v("上面的 "),a("code",[t._v("-d")]),t._v(" 是 "),a("code",[t._v("--out--dir")]),t._v(" 的缩写。")])]),t._v(" "),a("p",[t._v("方式二：给 "),a("code",[t._v("package.json")]),t._v(" 中配置命令，运行 "),a("code",[t._v("npm run build-d")]),t._v(" 效果也是一致的")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build-t"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build-d"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel src -d lib"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build-o"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel src/index.js -o dist/index.js"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("build-t")]),t._v(" ：单独编译某个文件")]),t._v(" "),a("li",[a("code",[t._v("build-d")]),t._v("：把一个文件夹内的所有文件统一编译到另一个文件夹里（文件夹自动生成，不需要自己创建）")]),t._v(" "),a("li",[a("code",[t._v("build-o")]),t._v("：把一个文件夹内的指定文件编译到另外的文件夹里（文件夹需要自己创建，可以指定文件名）")])]),t._v(" "),a("p",[t._v("转译后的"),a("code",[t._v("dist/index.js")]),t._v("内容如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"webpack中使用babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack中使用babel"}},[t._v("#")]),t._v(" ⭐️Webpack中使用Babel")]),t._v(" "),a("p",[t._v("我们如果希望在 Webpack 支持 Babel，则需要向 Webpack 中引入 Babel 的 loader。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" babel-loader @babel/core @babel/preset-env\n")])])]),a("p",[t._v("babel 是一个独立的工具，可以不在 webpack 中使用")]),t._v(" "),a("ul",[a("li",[t._v("babel-loader：加载器")]),t._v(" "),a("li",[a("code",[t._v("@babel/core")]),t._v("：babel 核心代码（必须安装）")]),t._v(" "),a("li",[a("code",[t._v("@babel/preset-env")]),t._v("：预设环境，根据你需要支持的环境（配合targets中的浏览器信息）自动决定适合你的 Babel 插件")])]),t._v(" "),a("h3",{attrs:{id:"配置-babel-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-babel-2"}},[t._v("#")]),t._v(" 配置 babel")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("webpack.config.json")])])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加载器")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// loader的配置")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" /\\.js$/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" /node_modules/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除node_modules代码不编译")]),t._v("\n            loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("test,验证规则，是js文件")]),t._v(" "),a("li",[t._v("loader，通过babel-loader去处理")]),t._v(" "),a("li",[t._v("include，处理哪个文件夹下的文件")]),t._v(" "),a("li",[t._v("exclude，排除哪个文件夹下的文件不处理")])]),t._v(" "),a("h3",{attrs:{id:"配置按需引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置按需引入"}},[t._v("#")]),t._v(" 配置按需引入")]),t._v(" "),a("p",[t._v("安装：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" @babel/plugin-transform-runtime\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" @babel/runtime\n")])])]),a("p",[a("code",[t._v("babel.config.json")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//按需引入")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//版本")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"absoluteRuntime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"helpers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"regenerator"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useESModules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("同时把 js 文件中的引入语句（"),a("code",[t._v('import "@babel/polyfill"')]),t._v("）删掉，因为是按需引入了。所以没有必要再安装 "),a("code",[t._v("@babel/polyfill")]),t._v("，只需安装"),a("code",[t._v("@babel/core")])]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 📄参考")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.babeljs.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://blog.csdn.net/web22050702/article/details/128502822",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_45143481/article/details/111491299",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_41030302/article/details/104370157",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://blog.csdn.net/longtengg1/article/details/118711030",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_33775582/article/details/86008308",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);