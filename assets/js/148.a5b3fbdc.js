(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{674:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"一、axios-基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、axios-基础"}},[t._v("#")]),t._v(" 一、axios 基础")]),t._v(" "),s("h2",{attrs:{id:"基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.axios-http.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("Axios"),s("OutboundLink")],1),t._v(" 是一个基于 promise 的网络请求库，可以用于浏览器和 node.js 。")]),t._v(" "),s("p",[t._v("在服务端它使用原生 node.js "),s("code",[t._v("http")]),t._v(" 模块, 而在客户端 (浏览端) 则使用 XMLHttpRequests。")]),t._v(" "),s("p",[t._v("axios（相比于原生的 XMLHttpRequest 对象来说） "),s("strong",[t._v("简单易用")]),t._v(",（相比于 jQuery）更加"),s("strong",[t._v("轻量化")]),t._v("且提供了易于扩展的接口，是专注于网络请求的库。（axios 本质上是原生 XMLHttpRequest 的封装）")]),t._v(" "),s("h2",{attrs:{id:"axios特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#axios特点"}},[t._v("#")]),t._v(" axios特点")]),t._v(" "),s("ol",[s("li",[t._v("Axios 是一个基于 promise 的 HTTP 库，支持 promise 所有的API")]),t._v(" "),s("li",[t._v("它可以拦截请求和响应")]),t._v(" "),s("li",[t._v("它可以转换请求数据和响应数据")]),t._v(" "),s("li",[t._v("它可以取消请求")]),t._v(" "),s("li",[t._v("它可以自动转换成 JSON 类型的数据")]),t._v(" "),s("li",[t._v("安全性更高，客户端支持防御 XSRF")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("XSRF")]),t._v(" 的全称是 “跨站请求伪造”，它利用的是服务器对客户端浏览器的信任，从而伪造用户向服务器发送请求，从而欺骗服务器达到一些目的。")])]),t._v(" "),s("h2",{attrs:{id:"axios-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#axios-api"}},[t._v("#")]),t._v(" axios API")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("axios(config)")]),t._v("：通用（最本质）的发任意类型请求的方式")]),t._v(" "),s("li",[s("strong",[t._v("axios (url [, config])")]),t._v("：可以指定 url 发 get 或 psot 请求")]),t._v(" "),s("li",[s("strong",[t._v("axios.request (config)")]),t._v("：等同于 axios(config)")]),t._v(" "),s("li",[s("strong",[t._v("axios.get (url [, config])")]),t._v("：发 get 请求，一般用户获取数据")]),t._v(" "),s("li",[s("strong",[t._v("axios.delete (url [, config])")]),t._v("：发 delete请求，删除数据")]),t._v(" "),s("li",[s("strong",[t._v("axios.post (url [, data, config])")]),t._v("：发 post 请求，一般用于表单提交与文件上传")]),t._v(" "),s("li",[s("strong",[t._v("axios.put (url [, data, config])")]),t._v("：发 put 请求，更新数据（所有数据推送到服务端）")]),t._v(" "),s("li",[s("strong",[t._v("axios.patch(url [, data, config])")]),t._v("：发 patch 请求，更新数据（只将修改的数据推送到后端）")])]),t._v(" "),s("p",[t._v("备注：post一般用于新建数据，put一般用于更新数据，patch一般用于数据量较大的时候的数据更新")]),t._v(" "),s("hr"),t._v(" "),s("ul",[s("li",[s("strong",[t._v("axios.defaults.xxx")]),t._v("：请求的默认全局配置")]),t._v(" "),s("li",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("axios.interceptors.request.use()")])]),t._v("：添加请求拦截器")]),t._v(" "),s("li",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("axios.interceptors.response.use()")])]),t._v("：添加响应拦截器")]),t._v(" "),s("li",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("axios.create([, config])")])]),t._v("：创建一个新的 axios（它没有下面的功能）")])]),t._v(" "),s("hr"),t._v(" "),s("ul",[s("li",[s("strong",[t._v("axios.Cancel( )")]),t._v("：用于创建取消请求的错误对象")]),t._v(" "),s("li",[s("strong",[t._v("axios.CancelToken( )")]),t._v("：用于创建取消请求的 token 对象")]),t._v(" "),s("li",[s("strong",[t._v("axios.isCancel( )")]),t._v("：是否是一个取消请求的错误")]),t._v(" "),s("li",[s("strong",[t._v("axios.all(promise)")]),t._v("：用于批量执行多个异步请求")]),t._v(" "),s("li",[s("strong",[t._v("aixos.spread( )")]),t._v("：用来指定接收所有成功数据的回调函数的方法")])]),t._v(" "),s("p",[t._v("https://blog.csdn.net/qq_52151772/article/details/122117478)")]),t._v(" "),s("h2",{attrs:{id:"配置对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置对象"}},[t._v("#")]),t._v(" 配置对象")]),t._v(" "),s("p",[t._v("**配置对象（config）**详细说明：")]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("p",[t._v("baseURL：请求的域名（基本地址）")])]),t._v(" "),s("li",[s("p",[t._v("timeout：请求的超时时长，超出后后端返回401")]),t._v(" "),s("p",[t._v("备注：一般由后端定义，后端的接口需要的处理时长较长的时候，如果请求的时间过长，后端处理不过来，就会阻塞，给服务器造成较大的压力。设置后，可以及时释放掉")])]),t._v(" "),s("li",[s("p",[t._v("url：请求路径，用于请求的服务器 URL")])]),t._v(" "),s("li",[s("p",[t._v("method：请求方法。如：get、post、put、patch、delete等")])]),t._v(" "),s("li",[s("p",[t._v("headers：请求头")])]),t._v(" "),s("li",[s("p",[t._v("params：将请求参数拼接到url上")])]),t._v(" "),s("li",[s("p",[t._v("data：将请求参数放置到请求体里")])])])]),t._v(" "),s("h2",{attrs:{id:"响应结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#响应结构"}},[t._v("#")]),t._v(" 响应结构")]),t._v(" "),s("p",[t._v("一个请求的响应包含以下信息")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// data 由服务器提供的响应")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// status 来自服务器响应的 HTTP 状态码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// statusText 来自服务器响应的 HTTP 状态信息")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("statusText")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OK'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// headers 是服务器响应头")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所有的 header 名称都是小写，而且可以使用方括号语法访问")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例如: response.headers['content-type']")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config 是 axios 请求的配置信息")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// request 是生成此响应的请求")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 node.js 中它是最后一个 ClientRequest 实例 (in redirects)，")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在浏览器中则是 XMLHttpRequest 实例")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"默认配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认配置"}},[t._v("#")]),t._v(" 默认配置")]),t._v(" "),s("p",[t._v("全局 axios 默认值：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置基础 URL")]),t._v("\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaults"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baseURL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.example.com'")]),t._v("\n\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaults"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTH_TOKEN")]),t._v("\n\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaults"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/x-www-form-urlencoded'")]),t._v("\n")])])]),s("p",[t._v("自定义实例默认值：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建实例时配置默认值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("baseURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.example.com'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建实例后修改默认值")]),t._v("\ninstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaults"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTH_TOKEN")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("配置的优先级：")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("lib/defaults.js")]),t._v("中找到的库默认值，然后是实例的"),s("code",[t._v("defaults")]),t._v("属性，最后是请求的"),s("code",[t._v("config")]),t._v("参数。后面的优先级要高于前面。")])]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.axios-http.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文文档"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://devpress.csdn.net/viewdesign/63ff2b4d986c660f3cf90b47.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://blog.csdn.net/qq_52151772/article/details/122117478",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章2"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);