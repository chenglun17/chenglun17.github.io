(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{669:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"一、原生-ajax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、原生-ajax"}},[t._v("#")]),t._v(" 一、原生 AJAX")]),t._v(" "),s("h2",{attrs:{id:"_1-ajax-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ajax-简介"}},[t._v("#")]),t._v(" 1.AJAX 简介")]),t._v(" "),s("p",[s("strong",[t._v("AJAX （Asynchronous JavaScript And XML）")]),t._v("，即 "),s("strong",[t._v("异步的 JavaScript 和 XML")])]),t._v(" "),s("p",[t._v("在网页中利用 XMLHttpRequest 对象和服务器进行数据交互的方式，就是 AJAX")]),t._v(" "),s("p",[t._v("通过 AJAX 可以在浏览器中面向服务器发生异步请求，最大优势："),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("无刷新获取数据")])]),t._v(" "),s("p",[t._v("Ajax 不是一种新的编程语言，而是一种用于创建更好更快以及交互性更强的 Web 应用程序的技术。")]),t._v(" "),s("ul",[s("li",[t._v("同步交互: 客户端发出一个请求后，需要等待服务器响应结束后，才能发出第二个请求。")]),t._v(" "),s("li",[t._v("异步交互: 客户端发出一个请求后，无需等待服务器响应结束，就可以发出第二个请求。")])]),t._v(" "),s("p",[s("strong",[t._v("AJAX 的特点：")])]),t._v(" "),s("p",[t._v("AJAX 的优点：")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("可以"),s("strong",[t._v("无需刷新")]),t._v("页面而与服务器进行通信")]),t._v(" "),s("li",[t._v("运行你根据用户事件来"),s("strong",[t._v("更新部分页面")]),t._v("内容")])])]),t._v(" "),s("p",[t._v("AJAX 的缺点：")]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("p",[t._v("没有浏览历史，不能回退")])]),t._v(" "),s("li",[s("p",[t._v("存在跨域问题（同源）")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("SEO（Search Engine Optimization，搜索引擎优化）")]),t._v(" 不友好")]),t._v(" "),s("p",[t._v("目的是让搜索引擎的爬虫更容易收集到你网站的内容，并把它们编写进自己的索引库中")])])])]),t._v(" "),s("h2",{attrs:{id:"_2-xmlhttprequest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-xmlhttprequest"}},[t._v("#")]),t._v(" 2.XMLHttpRequest")]),t._v(" "),s("p",[s("code",[t._v("XMLHttpRequest")]),t._v("（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。"),s("code",[t._v("XMLHttpRequest")]),t._v(" 在 AJAX 编程中被大量使用。")]),t._v(" "),s("p",[s("strong",[t._v("XML 简介")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("XML（Extensible Markup Language） 可扩展标记语言")]),t._v("，被设计用来 "),s("strong",[t._v("传输和存储数据")])]),t._v(" "),s("p",[t._v("XML 和 HTML 类似，不同的是 HTML 中都是预定义标签，而 "),s("strong",[t._v("XML 中没有预定义标签")])])]),t._v(" "),s("h2",{attrs:{id:"_3-xmlhttprequest-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-xmlhttprequest-api"}},[t._v("#")]),t._v(" 3.XMLHttpRequest API")]),t._v(" "),s("p",[t._v("MDN文档：https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest")]),t._v(" "),s("h3",{attrs:{id:"构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构造函数"}},[t._v("#")]),t._v(" 构造函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" request "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"实例属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例属性"}},[t._v("#")]),t._v(" 实例属性")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("status")]),t._v("：响应状态码值，如 200、404 等。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("statusText")]),t._v("：响应的具体内容是字符串，一般是 json 字符串。")])]),t._v(" "),s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("readyState")]),t._v("：返回一个 XMLHttpRequest 代理当前所处的状态。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("状态")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("0")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("UNSENT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("代理被创建，但尚未调用 open() 方法。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("1")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("OPENED")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("open()")]),t._v(" 方法已经被调用。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("2")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("HEADERS_RECEIVED")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("send()")]),t._v(" 方法已经被调用，并且头部和状态已经可获得。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("3")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("LOADING")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("下载中；"),s("code",[t._v("responseText")]),t._v(" 属性已经包含部分数据。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("4")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("DONE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("下载操作已完成。")])])])])]),t._v(" "),s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[t._v("response")]),t._v("："),s("code",[t._v("XMLHttpRequest")]),t._v(" 的 "),s("code",[t._v("response")]),t._v(" 属性返回响应的正文。返回的类型为 "),s("code",[t._v("ArrayBuffer")]),t._v("、"),s("code",[t._v("Blob")]),t._v("、"),s("code",[t._v("Document")]),t._v("、"),s("code",[t._v("JavaScript Object")]),t._v(" 或字符串中的一个。这取决于请求的 "),s("code",[t._v("responseType")]),t._v(" 属性。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("responseText")]),t._v("：在一个请求被发送后，从服务器端返回文本。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("responseType")]),t._v("：一个枚举字符串值，用于指定响应中包含的数据类型。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("responseURL")]),t._v("：只读属性，返回响应的序列化 URL，如果 URL 为空则返回空字符串。如果 URL 有锚点，则位于 URL # 后面的内容会被删除。如果 URL 有重定向，"),s("code",[t._v("responseURL")]),t._v(" 的值会是经过多次重定向后的最终 URL。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("responseXML")]),t._v("：只读属性，响应的具体内容是文档。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("timeout")]),t._v(" 指定请求超时时间，一个无符号长整型数，默认为 0 代表没有限制。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("upload")]),t._v("：用来表示上传的进度。这个对象是不透明的，可以通过对其绑定事件来追踪它的进度。")]),t._v(" "),s("p",[t._v("可以被绑定在 upload 对象上的事件监听器如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("事件")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("相应属性的信息类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("onloadstart")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取开始")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("onprogress")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("数据传输进行中")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("onabort")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取操作终止")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("onerror")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取失败")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("onload")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取成功")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ontimeout")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取操作在用户规定的时间内未完成")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("onloadend")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取完成（不论成功与否）")])])])])])]),t._v(" "),s("h3",{attrs:{id:"实例方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例方法"}},[t._v("#")]),t._v(" 实例方法")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[s("code",[t._v("XMLHttpRequest()")])]),t._v(" 创建 XHR 对象的构造函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[s("code",[t._v("open(请求方式, url)")])]),t._v(" 初始化一个请求，参数为：(method, url [, async])")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://127.0.0.1:8000/server?a=100&b=200'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[s("code",[t._v("send(data)")])]),t._v(" 发送请求")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[s("code",[t._v("abort()")])]),t._v(" 中断请求 （发出到返回之间）")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[s("code",[t._v("setRequestHeader(name, value)")])]),t._v(" 设置请求头")])]),t._v(" "),s("li",[s("p",[t._v("getResponseHeader(name) 获取指定名称的响应头值")])]),t._v(" "),s("li",[s("p",[t._v("getAllResponseHeaders() 获取所有响应头组成的字符串")])])]),t._v(" "),s("h3",{attrs:{id:"事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("readystatechange")]),t._v("：只要 "),s("code",[t._v("readyState")]),t._v(" 属性发生变化，回调函数就会触发")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onreadystatechange "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("loadstart")]),t._v("：当程序开始加载时，loadstart 事件将被触发。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("progress")]),t._v("："),s("code",[t._v("progress")]),t._v("事件会在请求接收到数据的时候被周期性触发。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("abort")]),t._v("：当一个请求终止时 "),s("code",[t._v("abort")]),t._v(" 事件被触发。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("error")]),t._v("：当请求遇到错误时，将触发"),s("code",[t._v("error")]),t._v(" 事件。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("load")]),t._v("：当一个"),s("code",[t._v("XMLHttpRequest")]),t._v("请求完成的时候会触发"),s("code",[t._v("load")]),t._v(" 事件。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("timeout")]),t._v("：当进度由于预定时间到期而终止时，会触发 "),s("code",[t._v("timeout")]),t._v(" 事件。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("loadend")]),t._v("：在一个资源的加载进度停止之后被触发")])])]),t._v(" "),s("h2",{attrs:{id:"_4-ajax-的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ajax-的使用"}},[t._v("#")]),t._v(" 4.AJAX 的使用")]),t._v(" "),s("h3",{attrs:{id:"服务端搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务端搭建"}},[t._v("#")]),t._v(" 服务端搭建")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("安装 "),s("a",{attrs:{href:"http://nodejs.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("安装 "),s("a",{attrs:{href:"https://www.expressjs.com.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("express"),s("OutboundLink")],1),t._v("（"),s("strong",[t._v("服务端框架")]),t._v("）")])])]),t._v(" "),s("blockquote",[s("ol",[s("li",[s("p",[t._v("初始化环境")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--yes")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("下载 express 包")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i express\n")])])])]),t._v(" "),s("li",[s("p",[t._v("编写服务端的 js 代码")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// server.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 引入express")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 创建应用对象")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 创建路由规则")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// request是对请求报文的封装对象，response是对响应报文的封装对象")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Access-Control-Allow-Origin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置响应头，设置允许跨域")]),t._v("\n\tresponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello Express"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置响应数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. 监听端口，启动服务")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"服务已经启动, 8000 端口监听中..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("运行 js 程序")])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),t._v(" ."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("server.js\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("使用 nodemon 自动重启工具")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("npx nodemon ."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("server.js\n")])])]),s("p",[t._v("http://127.0.0.1:8000/server")])]),t._v(" "),s("h3",{attrs:{id:"核心对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心对象"}},[t._v("#")]),t._v(" 核心对象")]),t._v(" "),s("p",[s("strong",[t._v("XMLHttpRequest（XHR）")]),t._v("，该对象用于与服务器交互，通过它，可以 "),s("strong",[t._v("请求服务器上的数据资源")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据")])]),t._v(" "),s("h3",{attrs:{id:"使用步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[t._v("#")]),t._v(" 使用步骤")]),t._v(" "),s("blockquote",[s("ol",[s("li",[s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("XMLHttpRequest()")])]),t._v(" 函数，创建 xhr 对象")])]),t._v(" "),s("li",[s("p",[t._v("调用"),s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("xhr.open()")])]),t._v(" 函数，初始化一个请求")]),t._v(" "),s("p",[s("code",[t._v("xhr.open([http method], [url], [async], [userName], [userPass])")])])]),t._v(" "),s("li",[s("p",[t._v("调用"),s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("xhr.send()")])]),t._v("函数，发送一个请求")])]),t._v(" "),s("li",[s("p",[t._v("设置回调函数，一个处理服务器响应的函数，事件监听 "),s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("onreadystatechange")])]),t._v("，接收响应")])]),t._v(" "),s("li",[s("p",[t._v("获取异步对象的 readyState 属性：该属性存有服务器响应的状态信息。每当 readyState 改变时， onreadystatechange 函数就会被执行")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.创建一个 XMLHttpRequest 实例对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.初始化一个请求，设置请求方法（GET、POST）和 url ")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以设置请求头，一般不设置，必须在 open() 之后、send() 之前调用 setRequestHeader()方法")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/x-www-form-urlencoded'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.发送请求")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get请求不传 body参数，只有post请求使用")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.接收响应")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// xhr.responseXML 接收xml格式的响应数据，xhr.responseText 接收文本格式的响应数据")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理服务端返回的结果")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 状态码")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 状态字符串")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getAllResponseHeaders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所有响应头")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 响应体")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 终止该请求")]),t._v("\n")])])]),s("h3",{attrs:{id:"ajax-请求状态码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax-请求状态码"}},[t._v("#")]),t._v(" AJAX 请求状态码")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("readyState")])]),t._v(" 属性返回一个 XMLHttpRequest 代理当前所处的状态")]),t._v(" "),s("p",[t._v("可以用来查看请求的当前状态，一个 XHR 代理总是处于下列状态中的一个：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("值")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("0")])]),t._v(" "),s("td",[t._v("XMLHttpRequest 实例已经生成了，但是 open（）方法还没有被调用")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("1")])]),t._v(" "),s("td",[t._v("open（）方法已经被调用，可以使用 "),s("strong",[t._v("setRequestHeader（）")]),t._v("，设定 HTTP "),s("strong",[t._v("请求头信息")])])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("2")])]),t._v(" "),s("td",[t._v("send（） 方法已经被调用，并且 "),s("strong",[t._v("头信息")]),t._v(" 和 "),s("strong",[t._v("状态码")]),t._v(" 已经可获得")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("3")])]),t._v(" "),s("td",[t._v("正在接收服务器传来的 body 部分的数据")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("4")])]),t._v(" "),s("td",[t._v("🟢服务器数据已经全部接收，或者本次接收已经失败了")])])])]),t._v(" "),s("h3",{attrs:{id:"http-常见的状态码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-常见的状态码"}},[t._v("#")]),t._v(" HTTP 常见的状态码")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("状态字符串")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("200")])]),t._v(" "),s("td",[t._v("OK")]),t._v(" "),s("td",[t._v("请求成功。一般用于 GET 与 POST 请求")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("201")])]),t._v(" "),s("td",[t._v("Created")]),t._v(" "),s("td",[t._v("已创建。成功请求并创建了新的资源")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("401")])]),t._v(" "),s("td",[t._v("Unauthorized")]),t._v(" "),s("td",[t._v("未授权 / 请求要求用户的身份认证")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("404")])]),t._v(" "),s("td",[t._v("Not Found")]),t._v(" "),s("td",[t._v("服务器无法根据客户端的请求找到资源")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("500")])]),t._v(" "),s("td",[t._v("Internal Server Error")]),t._v(" "),s("td",[t._v("服务器内部错误，无法完成请求")])])])]),t._v(" "),s("h2",{attrs:{id:"_5-ajax-解决浏览器缓存问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-ajax-解决浏览器缓存问题"}},[t._v("#")]),t._v(" 5.Ajax 解决浏览器缓存问题")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("在 ajax 发送请求前加上 "),s("strong",[s("code",[t._v('anyAjaxObj.setRequestHeader("If-Modified-Since","0")')])]),t._v(" "),s("br"),t._v("或 "),s("strong",[s("code",[t._v('anyAjaxObj.setRequestHeader("Cache-Control","no-cache")')])])]),t._v(" "),s("li",[t._v("在 URL 后面加上一个随机数： "),s("strong",[s("code",[t._v('"fresh=" + Math.random()')])])]),t._v(" "),s("li",[t._v("在 URL 后面加上时间搓： "),s("strong",[s("code",[t._v('"nowtime=" + new Date().getTime()')])])])])]),t._v(" "),s("h2",{attrs:{id:"_6-原生-ajax-封装成-promise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-原生-ajax-封装成-promise"}},[t._v("#")]),t._v(" 6.原生 Ajax 封装成 promise")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendAjax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n        xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://127.0.0.1:8000/server?a=100&b=200'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendAjax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("reason")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reason"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_7-http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-http"}},[t._v("#")]),t._v(" 7.HTTP")]),t._v(" "),s("p",[t._v("HTTP（HyperText Transport Protocol）超文本传输协议，协议详细规定了浏览器与万维网服务器之间互相通信的规则")]),t._v(" "),s("p",[s("strong",[t._v("请求报文")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("ie"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求头")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" atguigu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Cookie")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("guigu\nContent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" application"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("www"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("form"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("urlencoded\nUser"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" chrome "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("83")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 空行")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求体，[GET请求，则可以为空]，POST请求，可以不为空")]),t._v("\nusername"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("admin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("admin\n")])])]),s("p",[s("strong",[t._v("响应报文")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OK")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求头")]),t._v("\nContent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("charset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\nContent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),t._v("\nContent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" gzip\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 空行")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求体")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("head"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("head"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("你好啊"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);