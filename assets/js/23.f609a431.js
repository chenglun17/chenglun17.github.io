(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{327:function(t,s,a){t.exports=a.p+"assets/img/image-20230607212113803.e444450f.png"},328:function(t,s,a){t.exports=a.p+"assets/img/image-20230607212736209.991e4520.png"},329:function(t,s,a){t.exports=a.p+"assets/img/MVVM模型.0661ef11.png"},573:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue2-面试相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue2-面试相关"}},[t._v("#")]),t._v(" Vue2 面试相关")]),t._v(" "),s("h2",{attrs:{id:"_1-vue中给对象添加新的属性-界面不刷新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue中给对象添加新的属性-界面不刷新"}},[t._v("#")]),t._v(" 1.⭐️Vue中给对象添加新的属性，界面不刷新？")]),t._v(" "),s("p",[s("strong",[t._v("产生的问题：")])]),t._v(" "),s("p",[t._v("直接添加属性的问题：数据虽然更新了（"),s("code",[t._v("console")]),t._v("打印出了新属性），但页面并没有更新。")]),t._v(" "),s("p",[s("strong",[t._v("产生的原因：")])]),t._v(" "),s("p",[s("code",[t._v("vue2")]),t._v("是用过"),s("code",[t._v("Object.defineProperty")]),t._v("实现数据响应式，新增的属性，并没有通过"),s("code",[t._v("Object.defineProperty")]),t._v("设置成响应式数据。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("get foo:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" val\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("set foo:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("newVal"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("当我们访问"),s("code",[t._v("foo")]),t._v("属性或者设置"),s("code",[t._v("foo")]),t._v("值的时候都能够触发"),s("code",[t._v("setter")]),t._v("与"),s("code",[t._v("getter")]),t._v("，")]),t._v(" "),s("p",[t._v("但是我们为"),s("code",[t._v("obj")]),t._v("添加新属性的时候，却无法触发事件属性的拦截。")]),t._v(" "),s("p",[s("strong",[t._v("解决方案：")])]),t._v(" "),s("p",[s("code",[t._v("Vue")]),t._v(" 不允许在已经创建的实例上动态添加新的响应式属性，若想实现数据与视图同步更新，可采取下面三种解决方案：")]),t._v(" "),s("ul",[s("li",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("Vue.set()")])])]),t._v(" "),s("li",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("Object.assign()")])])]),t._v(" "),s("li",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("$forcecUpdated()")])])])]),t._v(" "),s("p",[s("strong",[t._v("1.Vue.set()")])]),t._v(" "),s("p",[s("code",[t._v("Vue.set(target, propertyName/index, value)")]),t._v(" 或")]),t._v(" "),s("p",[s("code",[t._v("vm.$set (target, propertyName/index, value)")])]),t._v(" "),s("p",[t._v("参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("{Object | Array} target")])]),t._v(" "),s("li",[s("code",[t._v("{string | number} propertyName/index")])]),t._v(" "),s("li",[s("code",[t._v("{any} value")])])]),t._v(" "),s("p",[t._v("返回值：设置的值")]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("Vue.set")]),t._v("向响应式对象中添加一个"),s("code",[t._v("property")]),t._v("，并确保这个新 "),s("code",[t._v("property")]),t._v("同样是响应式的，且触发视图更新")]),t._v(" "),s("p",[s("strong",[t._v("2.Object.assign()")])]),t._v(" "),s("p",[t._v("直接使用"),s("code",[t._v("Object.assign()")]),t._v("添加到对象的新属性不会触发更新")]),t._v(" "),s("p",[t._v("应创建一个新的对象，合并原对象和混入对象的属性")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someObject "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("newProperty1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("newProperty2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("3.$forceUpdate")])]),t._v(" "),s("p",[t._v("如果你发现你自己需要在 "),s("code",[t._v("Vue")]),t._v("中做一次强制更新，99.9% 的情况，是你在某个地方做错了事")]),t._v(" "),s("p",[s("code",[t._v("$forceUpdate")]),t._v("迫使"),s("code",[t._v("Vue")]),t._v(" 实例重新渲染")]),t._v(" "),s("p",[t._v("PS：仅仅影响实例本身和插入插槽内容的子组件，而不是所有子组件。")]),t._v(" "),s("p",[s("strong",[t._v("小结：")])]),t._v(" "),s("ul",[s("li",[t._v("如果为对象添加少量的新属性，可以直接采用"),s("code",[t._v("Vue.set()")])]),t._v(" "),s("li",[t._v("如果需要为新对象添加大量的新属性，则通过"),s("code",[t._v("Object.assign()")]),t._v("创建新对象")]),t._v(" "),s("li",[t._v("如果你实在不知道怎么操作时，可采取"),s("code",[t._v("$forceUpdate()")]),t._v("进行强制刷新 (不建议)")])]),t._v(" "),s("p",[t._v("PS："),s("code",[t._v("vue3")]),t._v("是用过"),s("code",[t._v("proxy")]),t._v("实现数据响应式的，直接动态添加新属性仍可以实现数据响应式")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://vue3js.cn/interview/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2-你知道-vue-中-key-的原理吗-说说你对它的理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-你知道-vue-中-key-的原理吗-说说你对它的理解"}},[t._v("#")]),t._v(" 2.⭐️你知道 Vue 中 key 的原理吗？说说你对它的理解")]),t._v(" "),s("h4",{attrs:{id:"_1-虚拟dom中key的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-虚拟dom中key的作用"}},[t._v("#")]),t._v(" 1.虚拟DOM中key的作用？")]),t._v(" "),s("ul",[s("li",[t._v("key 是虚拟 DOM 对象的标识，当数据发生变化时，Vue 会根据新数据生成新的虚拟DOM, "),s("br"),t._v("随后 Vue 进行 新虚拟DOM 与 旧虚拟DOM 的差异比较，比较规则如下：")])]),t._v(" "),s("p",[s("strong",[t._v("对比规则：")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("旧虚拟DOM中找到了与新虚拟DOM相同的 key")]),t._v(" "),s("ul",[s("li",[t._v("若虚拟DOM中内容没变, 直接使用之前的真实DOM！")]),t._v(" "),s("li",[t._v("若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM。")])])]),t._v(" "),s("li",[s("p",[t._v("旧虚拟DOM中未找到与新虚拟DOM相同的key")]),t._v(" "),s("ul",[s("li",[t._v("创建新的真实DOM，随后渲染到到页面。")])])])]),t._v(" "),s("h4",{attrs:{id:"_2-用-index-作为-key-引发的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-用-index-作为-key-引发的问题"}},[t._v("#")]),t._v(" 2.用 index 作为 key 引发的问题")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("若对数据进行：逆序添加、逆序删除等破坏顺序操作:")]),t._v(" "),s("ul",[s("li",[t._v("会产生没有必要的真实DOM更新 ==> 界面效果没问题, 但"),s("strong",[t._v("效率低")]),t._v("。")])])]),t._v(" "),s("li",[s("p",[t._v("如果结构中还包含"),s("strong",[t._v("输入类的DOM")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("会产生"),s("strong",[t._v("错误DOM更新")]),t._v(" ==> 界面有问题。")])])])]),t._v(" "),s("h4",{attrs:{id:"_3-开发中如何选择-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-开发中如何选择-key"}},[t._v("#")]),t._v(" 3.开发中如何选择 key?")]),t._v(" "),s("ol",[s("li",[t._v("最好使用每条数据的"),s("strong",[t._v("唯一标识")]),t._v("作为key, 比如id、手机号、身份证号、学号等唯一值。")]),t._v(" "),s("li",[t._v("如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用index作为key是没有问题的。")])]),t._v(" "),s("h2",{attrs:{id:"_3-vue-权限管理该怎么做-如果控制到按钮级别的权限怎么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-vue-权限管理该怎么做-如果控制到按钮级别的权限怎么做"}},[t._v("#")]),t._v(" 3.⭐️vue 权限管理该怎么做？如果控制到按钮级别的权限怎么做？")]),t._v(" "),s("h4",{attrs:{id:"_1-什么是权限管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是权限管理"}},[t._v("#")]),t._v(" 1.什么是权限管理")]),t._v(" "),s("p",[t._v("权限是对特定资源的访问许可，所谓权限控制，也就是确保用户只能访问到被分配的资源")]),t._v(" "),s("p",[t._v("而前端权限归根结底是请求的发起权，请求的发起可能有下面两种形式触发")]),t._v(" "),s("ul",[s("li",[t._v("页面加载触发")]),t._v(" "),s("li",[t._v("页面上的按钮点击触发")])]),t._v(" "),s("p",[t._v("所以我们可以从这两方面入手，对触发权限的源头进行控制，最终要实现的目标是：")]),t._v(" "),s("ul",[s("li",[t._v("路由方面，用户登录后只能看到自己有权访问的导航菜单，也只能访问自己有权访问的路由地址，否则将跳转 "),s("code",[t._v("4xx")]),t._v(" 提示页")]),t._v(" "),s("li",[t._v("视图方面，用户只能看到自己有权浏览的内容和有权操作的控件")]),t._v(" "),s("li",[t._v("最后再加上请求控制作为最后一道防线，路由可能配置失误，按钮可能忘了加权限，这种时候请求控制可以用来兜底，越权请求将在前端被拦截")])]),t._v(" "),s("h4",{attrs:{id:"_2-权限控制分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-权限控制分类"}},[t._v("#")]),t._v(" 2.权限控制分类")]),t._v(" "),s("p",[t._v("前端权限控制可以分为四个方面：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E6%8E%A5%E5%8F%A3%E6%9D%83%E9%99%90"}},[t._v("接口 (登陆) 权限")]),t._v("：用户登录后将 token 缓存本地，发送请求时携带 token，后端对 token 进行校验")]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E6%8C%89%E9%92%AE%E6%9D%83%E9%99%90"}},[t._v("按钮权限")]),t._v("：一般通过指令实现，根据接口返回页面按钮权限列表，在按钮上使用指令控制显示隐藏")]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E8%8F%9C%E5%8D%95%E6%9D%83%E9%99%90"}},[t._v("菜单 (页面) 权限")]),t._v("：根据接口返回权限列表，筛选出有权限的路由动态添加到路由表")]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E8%B7%AF%E7%94%B1%E6%9D%83%E9%99%90"}},[t._v("路由 (访问) 权限")]),t._v("：根据用户是否登录判断用户是否可以访问页面，在路由守卫中判断")])]),t._v(" "),s("h4",{attrs:{id:"接口权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口权限"}},[t._v("#")]),t._v(" 接口权限")]),t._v(" "),s("ul",[s("li",[t._v("接口权限目前一般采用"),s("code",[t._v("jwt")]),t._v("的形式来验证，没有通过的话一般返回"),s("code",[t._v("401")]),t._v("，跳转到登录页面重新进行登录，登录完拿到"),s("code",[t._v("token")]),t._v("，将"),s("code",[t._v("token")]),t._v("存起来，通过"),s("code",[t._v("axios")]),t._v("请求拦截器进行拦截，每次请求的时候头部携带"),s("code",[t._v("token")]),t._v("。")])]),t._v(" "),s("h4",{attrs:{id:"按钮权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#按钮权限"}},[t._v("#")]),t._v(" 按钮权限")]),t._v(" "),s("p",[t._v("方案一：")]),t._v(" "),s("ul",[s("li",[t._v("按钮权限也可以用"),s("code",[t._v("v-if")]),t._v("判断，但是如果页面过多，每个页面页面都要获取用户权限"),s("code",[t._v("role")]),t._v("和路由表里的"),s("code",[t._v("meta.btnPermissions")]),t._v("，然后再做判断。")])]),t._v(" "),s("p",[t._v("方案二：")]),t._v(" "),s("ul",[s("li",[t._v("通过自定义指令进行按钮权限的判断")])]),t._v(" "),s("p",[t._v("首先配置路由")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/permission'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Layout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'权限测试'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("meta")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("btnPermissions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'supper'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'normal'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//页面需要的权限")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'supper'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'system/supper'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'权限测试页'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("meta")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("btnPermissions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'supper'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//页面需要的权限")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'normal'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'system/normal'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'权限测试页'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("meta")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("btnPermissions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//页面需要的权限")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("自定义权限鉴定指令")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**权限指令**/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" has "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'has'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取页面按钮权限")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" btnPermissionsArr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果指令传值，获取指令参数，根据指令参数和当前登录人按钮权限做比较。")]),t._v("\n            btnPermissionsArr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 否则获取路由中的参数，根据路由的btnPermissionsArr和当前登录人按钮权限做比较。")]),t._v("\n            btnPermissionsArr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("btnPermissions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$_has")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("btnPermissionsArr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 权限检查方法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("$_has")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isExist "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取用户按钮权限")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" btnPermissionsStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btnPermissions"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("btnPermissionsStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" btnPermissionsStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("btnPermissionsStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        isExist "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" isExist"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("has"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在使用的按钮中只需要引用"),s("code",[t._v("v-has")]),t._v("指令")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("editClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("primary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-has")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("编辑"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h4",{attrs:{id:"菜单权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#菜单权限"}},[t._v("#")]),t._v(" 菜单权限")]),t._v(" "),s("p",[t._v("菜单权限可以理解成将页面与路由进行解耦。")]),t._v(" "),s("p",[s("strong",[t._v("方案一：")])]),t._v(" "),s("ul",[s("li",[t._v("菜单与路由分离，菜单由后端返回")])]),t._v(" "),s("p",[t._v("前端定义路由信息")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/pages/Login.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("全局路由守卫里做判断")]),t._v(" "),s("p",[t._v("这种方式的缺点：")]),t._v(" "),s("ul",[s("li",[t._v("菜单需要与路由做一一对应，前端添加了新功能，需要通过菜单管理功能添加新的菜单，如果菜单配置的不对会导致应用不能正常使用")]),t._v(" "),s("li",[t._v("全局路由守卫里，每次路由跳转都要做判断")])]),t._v(" "),s("p",[s("strong",[t._v("方案二：")])]),t._v(" "),s("ul",[s("li",[t._v("菜单和路由都由后端返回")])]),t._v(" "),s("p",[t._v("前端统一定义路由组件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Home")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../pages/Home.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("UserInfo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../pages/UserInfo.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("home")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("userInfo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UserInfo\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("后端路由组件返回以下格式")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/userinfo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userInfo"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("在将后端返回路由通过"),s("code",[t._v("addRoutes")]),t._v("动态挂载之间，需要将数据处理一下，将"),s("code",[t._v("component")]),t._v("字段换为真正的组件")]),t._v(" "),s("p",[t._v("这种方法也会存在缺点：")]),t._v(" "),s("ul",[s("li",[t._v("全局路由守卫里，每次路由跳转都要做判断")]),t._v(" "),s("li",[t._v("前后端的配合要求更高")])]),t._v(" "),s("h4",{attrs:{id:"路由权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由权限"}},[t._v("#")]),t._v(" 路由权限")]),t._v(" "),s("p",[s("strong",[t._v("方案一：")])]),t._v(" "),s("ul",[s("li",[t._v("初始化即挂载全部路由，并且在路由上标记相应的权限信息，每次路由跳转前做校验。")])]),t._v(" "),s("p",[t._v("这种方式存在以下四种缺点：")]),t._v(" "),s("ul",[s("li",[t._v("加载所有的路由，如果路由很多，而用户并不是所有的路由都有权限访问，对性能会有影响。")]),t._v(" "),s("li",[t._v("全局路由守卫里，每次路由跳转都要做权限判断。")]),t._v(" "),s("li",[t._v("菜单信息写死在前端，要改个显示文字或权限信息，需要重新编译")]),t._v(" "),s("li",[t._v("菜单跟路由耦合在一起，定义路由的时候还有添加菜单显示标题，图标之类的信息，而且路由不一定作为菜单显示，还要多加字段进行标识")])]),t._v(" "),s("p",[s("strong",[t._v("方案二：")])]),t._v(" "),s("ul",[s("li",[t._v("初始化的时候先挂载不需要权限控制的路由，比如登录页，404等错误页。如果用户通过URL进行强制访问，则会直接进入404，相当于从源头上做了控制。")])]),t._v(" "),s("p",[t._v("登录后，获取用户的权限信息，然后筛选有权限访问的路由，在全局路由守卫里进行调用"),s("code",[t._v("addRoutes")]),t._v("添加路由")]),t._v(" "),s("p",[t._v("按需挂载，路由就需要知道用户的路由权限，也就是在用户登录进来的时候就要知道当前用户拥有哪些路由权限")]),t._v(" "),s("p",[t._v("这种方式也存在了以下的缺点：")]),t._v(" "),s("ul",[s("li",[t._v("全局路由守卫里，每次路由跳转都要做判断")]),t._v(" "),s("li",[t._v("菜单信息写死在前端，要改个显示文字或权限信息，需要重新编译")]),t._v(" "),s("li",[t._v("菜单跟路由耦合在一起，定义路由的时候还有添加菜单显示标题，图标之类的信息，而且路由不一定作为菜单显示，还要多加字段进行标识")])]),t._v(" "),s("h2",{attrs:{id:"_4-你有写过自定义指令吗-自定义指令的应用场景有哪些"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-你有写过自定义指令吗-自定义指令的应用场景有哪些"}},[t._v("#")]),t._v(" 4.⭐️你有写过自定义指令吗？自定义指令的应用场景有哪些？")]),t._v(" "),s("h4",{attrs:{id:"什么是指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是指令"}},[t._v("#")]),t._v(" 什么是指令")]),t._v(" "),s("p",[s("strong",[t._v("指令系统")]),t._v("是计算机硬件的语言系统，也叫机器语言，它是系统程序员看到的计算机的主要属性。因此指令系统表征了计算机的基本功能决定了机器所要求的能力。")]),t._v(" "),s("p",[t._v("我们看到的"),s("code",[t._v("v-")]),t._v("开头的行内属性，都是指令，不同的指令可以完成或实现不同的功能")]),t._v(" "),s("p",[t._v("除了核心功能默认内置的指令 ("),s("code",[t._v("v-model")]),t._v(" 和 "),s("code",[t._v("v-show")]),t._v(")，"),s("code",[t._v("Vue")]),t._v(" 也允许注册自定义指令")]),t._v(" "),s("p",[t._v("指令使用的几种方式：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//会实例化一个指令，但这个指令没有参数 ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("v-xxx")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- 将值传到指令中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('v-xxx="value"')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("  \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- 将字符串传入到指令中，如`v-html=\"'<p>内容</p>'\"`")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("v-xxx=\"'string'\"")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// -- 传参数（`arg`），如`v-bind:class="className"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('v-xxx:arg="value"')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- 使用修饰符（`modifier`）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('v-xxx:arg.modifier="value"')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" \n")])])]),s("h4",{attrs:{id:"怎么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎么做"}},[t._v("#")]),t._v(" 怎么做")]),t._v(" "),s("p",[t._v("注册一个自定义指令有全局注册与局部注册：")]),t._v(" "),s("ul",[s("li",[t._v("全局注册主要是通过"),s("code",[t._v("Vue.directive")]),t._v("方法进行注册")]),t._v(" "),s("li",[t._v("局部注册通过在组件"),s("code",[t._v("options")]),t._v("选项中设置"),s("code",[t._v("directives")]),t._v("属性")])]),t._v(" "),s("h4",{attrs:{id:"应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),s("p",[t._v("使用自定义指令可以满足我们日常一些场景，这里给出几个自定义指令的案例：")]),t._v(" "),s("ul",[s("li",[t._v("表单防止重复提交")]),t._v(" "),s("li",[t._v("图片懒加载")]),t._v(" "),s("li",[t._v("一键 Copy的功能")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/6844903826693029895",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_5-对-mvc、mvp-和-mvvm-的理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-对-mvc、mvp-和-mvvm-的理解"}},[t._v("#")]),t._v(" 5.⭐️对 MVC、MVP 和 MVVM 的理解")]),t._v(" "),s("h4",{attrs:{id:"mvc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mvc"}},[t._v("#")]),t._v(" MVC")]),t._v(" "),s("p",[t._v("前端的 MVC 与后端类似，具备 "),s("strong",[t._v("M（Model）模型")]),t._v("，"),s("strong",[t._v("V（View）视图")]),t._v("，"),s("strong",[t._v("C（Controller）控制器")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("Model：负责封装和处理数据，与后端数据进行同步。")]),t._v(" "),s("li",[t._v("View：负责展示数据，将 Model 中的数据可视化出来。")]),t._v(" "),s("li",[t._v("Controller：负责业务逻辑，根据用户行为对 Model 数据进行修改。")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(327),alt:""}})]),t._v(" "),s("h4",{attrs:{id:"mvp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mvp"}},[t._v("#")]),t._v(" MVP")]),t._v(" "),s("p",[t._v("MVP 模式虽然前端开发并不常见，但是安卓等原生开发中，还是有使用。")]),t._v(" "),s("p",[t._v("MVP 月 MVC 很相似，P（Presenter），可以理解为一个中间人，它负责 View 和 Model 之间的数据流动，防止 View 和 Model 之间直接交流。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(328),alt:""}})]),t._v(" "),s("h4",{attrs:{id:"mvvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mvvm"}},[t._v("#")]),t._v(" MVVM")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/jiahao1186/article/details/121915711",target:"_blank",rel:"noopener noreferrer"}},[t._v("MVVM"),s("OutboundLink")],1),t._v("，是 Model-View-ViewModel 的简写，是 M-V-VM 三部分组成。它本质上就是 MVC 的改进版。")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("M：模型（Model）")]),t._v("，准备数据，当前页面渲染时所依赖的数据源。")]),t._v(" "),s("li",[s("strong",[t._v("V：视图（View）")]),t._v("，展示页面，当前页面所渲染的 DOM 结构。")]),t._v(" "),s("li",[s("strong",[t._v("VM：视图模型（ViewModel）")]),t._v("，Vue实例对象（vm），用于视图和模型（即数据）的转换。\n"),s("ul",[s("li",[t._v("DOM 监听器，监听页面 DOM 节点的变化，当页面 DOM 节点发送改变时，数据也会发生改变")]),t._v(" "),s("li",[t._v("数据绑定，当 Model 数据发生改变时，视图界面也会发生改变")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(329),alt:""}})]),t._v(" "),s("p",[t._v("MVVM 的核心思想："),s("strong",{staticStyle:{color:"#DD5145"}},[t._v("关注 Model（即数据）的变化")]),t._v("。让 MVVM 框架利用自己的机制自动更新 DOM（即View视图），也就是所谓的"),s("strong",[t._v("数据-视图")]),t._v("分离。")]),t._v(" "),s("ul",[s("li",[t._v("ViewModel 通过实现一套"),s("strong",[t._v("数据响应式机制")]),t._v("，自动响应 Model 中的数据变化。\n"),s("ul",[s("li",[t._v("主要职责：数据变化后更新视图，视图变化后更新数据")])])]),t._v(" "),s("li",[t._v("同时 ViewModel 会实现一套更新策略，自动将"),s("strong",[t._v("数据变化")]),t._v("转换为"),s("strong",[t._v("视图更新")]),t._v("。")]),t._v(" "),s("li",[t._v("通过"),s("strong",[t._v("事件监听")]),t._v("响应 View 中用户交互修改 Model 中数据。")]),t._v(" "),s("li",[t._v("在 ViewModel 中就减少了大量 DOM 操作的代码。")])]),t._v(" "),s("p",[t._v("MVVM 在保持 View 和 Model 低耦合的同时，还减少了维护它们关系的代码，使开发者更专注与于业务逻辑。")]),t._v(" "),s("h4",{attrs:{id:"双向数据绑定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#双向数据绑定"}},[t._v("#")]),t._v(" 双向数据绑定")]),t._v(" "),s("ul",[s("li",[t._v("View 中数据变化将自动更新到 Model 上，反之，Model 中数据变化也会自动更新到视图（view）上")]),t._v(" "),s("li",[t._v("ViewModel 就是 View 和 Model 的桥梁")]),t._v(" "),s("li",[t._v("ViewModel 负责把 Model 的数据同步到 View 显示出来，还负责把 View 的修改同步回到 Model")])]),t._v(" "),s("h4",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("ul",[s("li",[t._v("这三者都是框架模式，它们设计的目的都是为了解决 Model 和 View 的耦合问题")])]),t._v(" "),s("h2",{attrs:{id:"_6-v-if-和-v-for-为什么不建议一起使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-v-if-和-v-for-为什么不建议一起使用"}},[t._v("#")]),t._v(" 6.⭐️v-if 和 v-for 为什么不建议一起使用？")]),t._v(" "),s("p",[s("code",[t._v("v-if")]),t._v("指令用于条件性地渲染一块内容。这块内容只会在指令的表达式返回 "),s("code",[t._v("true")]),t._v("值的时候被渲染。")]),t._v(" "),s("p",[s("code",[t._v("v-for")]),t._v("指令基于一个数组来渲染一个列表。")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Modal")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isShow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item in items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item.id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ item.label }}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("不要把 "),s("code",[t._v("v-if")]),t._v(" 和 "),s("code",[t._v("v-for")]),t._v(" 同时用在同一个元素上，带来性能方面的浪费")]),t._v(" "),s("p",[s("strong",{staticStyle:{color:"#DD5145"}},[s("code",[t._v("v-for")]),t._v("优先级是比"),s("code",[t._v("v-if")]),t._v("高")]),t._v("，导致每循环一次就会去"),s("code",[t._v("v-if")]),t._v("一次，而"),s("code",[t._v("v-if")]),t._v("是通过创建和销毁 DOM 元素来控制元素的显示与隐藏，所以就会不停的去创建和销毁元素，造成页面卡顿，性能下降。")])])]),t._v(" "),s("p",[t._v("解决方法：")]),t._v(" "),s("ul",[s("li",[t._v("若要避免出现这种情况，则在外层嵌套"),s("code",[t._v("template")]),t._v("（页面渲染不生成"),s("code",[t._v("DOM")]),t._v("节点），在这一层进行"),s("code",[t._v("v-if")]),t._v("判断，然后在内部进行"),s("code",[t._v("v-for")]),t._v("循环")])]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isShow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item in items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("如果条件出现在循环内部，可通过计算属性"),s("code",[t._v("computed")]),t._v("提前过滤掉那些不需要显示的项")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("items")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isShow\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"spa首屏加载速度慢的怎么解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spa首屏加载速度慢的怎么解决"}},[t._v("#")]),t._v(" SPA首屏加载速度慢的怎么解决？")]),t._v(" "),s("h4",{attrs:{id:"什么是首屏加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是首屏加载"}},[t._v("#")]),t._v(" 什么是首屏加载")]),t._v(" "),s("p",[t._v("首屏时间（First Contentful Paint），指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但需要展示当前视窗需要的内容")]),t._v(" "),s("p",[t._v("首屏加载可以说是用户体验中"),s("strong",[t._v("最重要")]),t._v("的环节")]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("DOMContentLoad")]),t._v("或者"),s("code",[t._v("performance")]),t._v("来计算出首屏时间：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方案一：")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DOMContentLoaded'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first contentful painting'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方案二：")]),t._v("\nperformance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first-contentful-paint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// performance.getEntriesByName("first-contentful-paint")[0]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会返回一个 PerformancePaintTiming的实例，结构如下：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first-contentful-paint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entryType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"paint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("startTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("507.80000002123415")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"加载慢的原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载慢的原因"}},[t._v("#")]),t._v(" 加载慢的原因")]),t._v(" "),s("p",[t._v("在页面渲染的过程，导致加载速度慢的因素可能如下：")]),t._v(" "),s("ul",[s("li",[t._v("网络延时问题")]),t._v(" "),s("li",[t._v("资源文件体积是否过大")]),t._v(" "),s("li",[t._v("资源是否重复发送请求去加载了")]),t._v(" "),s("li",[t._v("加载脚本的时候，渲染内容堵塞了")])]),t._v(" "),s("h4",{attrs:{id:"解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),s("p",[t._v("常见的几种SPA首屏优化方式")]),t._v(" "),s("ul",[s("li",[t._v("减小入口文件积")]),t._v(" "),s("li",[t._v("静态资源本地缓存")]),t._v(" "),s("li",[t._v("UI框架按需加载")]),t._v(" "),s("li",[t._v("图片资源的压缩")]),t._v(" "),s("li",[t._v("组件重复打包")]),t._v(" "),s("li",[t._v("开启GZip压缩")]),t._v(" "),s("li",[t._v("使用SSR")])])])}),[],!1,null,null,null);s.default=e.exports}}]);